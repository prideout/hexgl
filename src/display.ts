// -------------------------------------------------------------------------------------------------
// The Display draws to the main canvas and manages all Filament entities.
//
//   - constructor(canvas: HTMLCanvasElement, vehicle: Vehicle)
//   - readonly camera: Filament.Camera;
//   - render()
//
// HexGL by Thibaut 'BKcore' Despoulain <http://bkcore.com>
// Rewritten by Philip Rideout <https://prideout.net>
// -------------------------------------------------------------------------------------------------

import "./filament";

import * as urls from "./urls";

import Vehicle from "./vehicle";

export default class Display {
    public readonly camera: Filament.Camera;

    private readonly canvas: HTMLCanvasElement;
    private readonly engine: Filament.Engine;
    private readonly indirectLight: Filament.IndirectLight;
    private readonly material: Filament.Material;
    private readonly renderer: Filament.Renderer;
    private readonly sampler: Filament.TextureSampler;
    private readonly scene: Filament.Scene;
    private readonly swapChain: Filament.SwapChain;
    private readonly vehicle: Vehicle;
    private readonly view: Filament.View;

    private ship: Filament.Entity;
    private skybox: Filament.Skybox;

    constructor(canvas, vehicle) {
        this.canvas = canvas;
        this.vehicle = vehicle;
        this.engine = Filament.Engine.create(canvas);
        this.scene = this.engine.createScene();
        this.skybox = this.engine.createSkyFromKtx(urls.skySmall);
        this.scene.setSkybox(this.skybox);
        this.indirectLight = this.engine.createIblFromKtx(urls.ibl);
        this.indirectLight.setIntensity(100000);
        this.scene.setIndirectLight(this.indirectLight);
        this.swapChain = this.engine.createSwapChain();
        this.renderer = this.engine.createRenderer();
        this.camera = this.engine.createCamera();
        this.view = this.engine.createView();
        this.view.setCamera(this.camera);
        this.view.setScene(this.scene);

        this.sampler = new Filament.TextureSampler(
            Filament.MinFilter.LINEAR_MIPMAP_LINEAR, Filament.MagFilter.LINEAR,
            Filament.WrapMode.REPEAT);

        this.material = this.engine.createMaterial(urls.tracksMaterial);

        // Load the high-res skybox only after every other asset has been loaded.
        const addEntity = (entity) => {
            this.scene.addEntity(entity);
            if (5 === this.scene.getRenderableCount()) {
                Filament.fetch([urls.skyLarge], () => {
                    this.engine.destroySkybox(this.skybox);
                    this.skybox = this.engine.createSkyFromKtx(urls.skyLarge);
                    this.scene.setSkybox(this.skybox);
                });
            }
        };

        const filenames = [urls.diffuse, urls.specular, urls.normal, urls.mesh];
        const shipmi = this.material.createInstance();
        const asset = "ship";
        const assetUrls = filenames.map((path) => `${asset}/${path}`);

        // Load the ship first since it determines camera, then all other assets.
        Filament.fetch(assetUrls, () => {
            this.ship = this.createRenderable(asset, shipmi);
            addEntity(this.ship);
            for (const bgasset of ["tracks", "scrapers1", "scrapers2"]) {
                const bgurls = filenames.map((path) => `${bgasset}/${path}`);
                Filament.fetch(bgurls, () => {
                    const bgmi = this.material.createInstance();
                    addEntity(this.createRenderable(bgasset, bgmi));
                });
            }
        });

        const sunlight = Filament.EntityManager.get().create();
        Filament.LightManager.Builder(Filament.LightManager$Type.SUN)
            .color([0.98, 0.92, 0.89])
            .intensity(110000.0)
            .direction([0.5, -1, 0])
            .build(this.engine, sunlight);
        addEntity(sunlight);

        this.resize = this.resize.bind(this);
        window.addEventListener("resize", this.resize);
        this.resize();
    }

    public render() {
        if (this.ship) {
            const tcm = this.engine.getTransformManager();
            const inst = tcm.getInstance(this.ship);
            tcm.setTransform(inst, this.vehicle.getMatrix() as unknown as number[]);
            inst.delete();
        }
        this.renderer.render(this.swapChain, this.view);
    }

    private resize() {
        const dpr = window.devicePixelRatio;
        const width = this.canvas.width = window.innerWidth * dpr;
        const height = this.canvas.height = window.innerHeight * dpr;
        this.view.setViewport([0, 0, width, height]);

        const aspect = width / height;
        const Fov = Filament.Camera$Fov;
        const fov = aspect < 1 ? Fov.HORIZONTAL : Fov.VERTICAL;
        this.camera.setProjectionFov(45, aspect, 1.0, 20000.0, fov);
    }

    private createRenderable(name, matinstance) {
        const diffuse = this.engine.createTextureFromJpeg(`${name}/${urls.diffuse}`);
        const specular = this.engine.createTextureFromJpeg(`${name}/${urls.specular}`);
        const normal = this.engine.createTextureFromJpeg(`${name}/${urls.normal}`);
        matinstance.setTextureParameter("diffuse", diffuse, this.sampler);
        matinstance.setTextureParameter("specular", specular, this.sampler);
        matinstance.setTextureParameter("normal", normal, this.sampler);
        return this.engine.loadFilamesh(`${name}/${urls.mesh}`, matinstance, {}).renderable;
    }
}

// 'booster.diffuse'					: "textures.full/ships/feisar/booster/booster.png",
// 'booster.sprite'					: "textures.full/ships/feisar/booster/boostersprite.jpg",

// this.materials.booster = new THREE.MeshBasicMaterial({
//     map: this.lib.get("textures", "booster.diffuse"),
//     transparent: true
// });

const boostersprite = {
    metadata : {
        formatVersion : 3.1,
        sourceFile    : "booster.obj",
        generatedBy   : "OBJConverter",
        vertices      : 48,
        faces         : 72,
        normals       : 48,
        colors        : 0,
        uvs           : 52,
        materials     : 1
    },
    scale : 1.000000,
    materials: [	{
        DbgColor : 15658734,
        DbgIndex : 0,
        DbgName : "02___Default",
        colorAmbient : [0.588235, 0.588235, 0.588235],
        colorDiffuse : [0.588235, 0.588235, 0.588235],
        colorSpecular : [0.0, 0.0, 0.0],
        illumination : 2,
        opticalDensity : 1.5,
        specularCoef : 9.999999,
        transparency : 0.0 }],
    vertices: [0.177146,0.211115,-0.000000,0.258970,0.094257,0.000000,0.369958,0.134654,-0.121302,0.253066,0.301592,-0.121302,0.271404,-0.047856,0.000000,0.387720,-0.068365,-0.121302,0.211115,-0.177146,0.000000,0.301592,-0.253066,-0.121302,0.094257,-0.258970,0.000000,0.134654,-0.369958,-0.121302,-0.047856,-0.271404,0.000000,-0.068365,-0.387720,-0.121302,-0.177146,-0.211115,0.000000,-0.253066,-0.301592,-0.121302,-0.258970,-0.094258,-0.000000,-0.369958,-0.134654,-0.121302,-0.271404,0.047856,-0.000000,-0.387720,0.068365,-0.121302,-0.211115,0.177146,-0.000000,-0.301592,0.253066,-0.121302,-0.094258,0.258970,-0.000000,-0.134654,0.369958,-0.121302,0.047856,0.271404,-0.000000,0.068365,0.387720,-0.121302,0.480945,0.175050,-0.659920,0.328986,0.392070,-0.659920,0.504035,-0.088875,-0.659920,0.392070,-0.328986,-0.659920,0.175050,-0.480945,-0.659920,-0.088875,-0.504035,-0.659920,-0.328986,-0.392070,-0.659920,-0.480945,-0.175050,-0.659920,-0.504035,0.088875,-0.659920,-0.392070,0.328985,-0.659920,-0.175050,0.480945,-0.659920,0.088875,0.504035,-0.659920,0.266370,0.096951,-2.900593,0.182208,0.217146,-2.900593,0.279158,-0.049223,-2.900593,0.217146,-0.182208,-2.900593,0.096951,-0.266370,-2.900593,-0.049223,-0.279158,-2.900593,-0.182207,-0.217146,-2.900593,-0.266369,-0.096951,-2.900593,-0.279158,0.049223,-2.900593,-0.217146,0.182207,-2.900593,-0.096951,0.266369,-2.900593,0.049223,0.279158,-2.900593],
    morphTargets: [],
    morphColors: [],
    normals: [0.46054,0.54885,0.69762,0.67326,0.24505,0.69762,0.83624,0.30436,0.45615,0.57202,0.68171,0.45615,0.70559,-0.12441,0.69762,0.87638,-0.15453,0.45615,0.54885,-0.46054,0.69762,0.68171,-0.57202,0.45615,0.24505,-0.67326,0.69762,0.30436,-0.83624,0.45615,-0.12441,-0.70559,0.69762,-0.15453,-0.87638,0.45615,-0.46054,-0.54885,0.69762,-0.57202,-0.68171,0.45615,-0.67326,-0.24505,0.69762,-0.83624,-0.30436,0.45615,-0.70559,0.12441,0.69762,-0.87638,0.15453,0.45615,-0.54885,0.46054,0.69762,-0.68171,0.57202,0.45615,-0.24505,0.67326,0.69762,-0.30436,0.83624,0.45615,0.12441,0.70559,0.69762,0.15453,0.87638,0.45615,0.93823,0.34149,0.055692,0.64179,0.76486,0.055692,0.98328,-0.17338,0.055692,0.76486,-0.64179,0.055692,0.34149,-0.93823,0.055692,-0.17338,-0.98328,0.055692,-0.64179,-0.76486,0.055692,-0.93823,-0.34149,0.055692,-0.98328,0.17338,0.055692,-0.76486,0.64179,0.055692,-0.34149,0.93823,0.055692,0.17338,0.98328,0.055692,0.93485,0.34026,-0.10139,0.63948,0.7621,-0.10139,0.97973,-0.17275,-0.10139,0.7621,-0.63948,-0.10139,0.34026,-0.93485,-0.10139,-0.17275,-0.97973,-0.10139,-0.63948,-0.7621,-0.10139,-0.93485,-0.34026,-0.10139,-0.97973,0.17275,-0.10139,-0.7621,0.63948,-0.10139,-0.34026,0.93485,-0.10139,0.17275,0.97973,-0.10139],
    colors: [],
    uvs: [[0.58311,1.0001,0.49977,1.0001,0.49977,0.9583,0.58311,0.9583,0.41644,1.0001,0.41644,0.9583,0.33311,1.0001,0.33311,0.9583,0.24977,1.0001,0.24977,0.9583,0.16644,1.0001,0.16644,0.9583,0.083106,1.0001,0.083106,0.9583,-0.000227,1.0001,-0.000227,0.9583,0.99977,1.0001,0.91644,1.0001,0.91644,0.9583,0.99977,0.9583,0.83311,1.0001,0.83311,0.9583,0.74977,1.0001,0.74977,0.9583,0.66644,1.0001,0.66644,0.9583,0.49977,0.77261,0.58311,0.77261,0.41644,0.77261,0.33311,0.77261,0.24977,0.77261,0.16644,0.77261,0.083106,0.77261,-0.000227,0.77261,0.91644,0.77261,0.99977,0.77261,0.83311,0.77261,0.74977,0.77261,0.66644,0.77261,0.49977,0.000123,0.58311,0.000123,0.41644,0.000123,0.33311,0.000123,0.24977,0.000123,0.16644,0.000123,0.083106,0.000123,-0.000227,0.000123,0.91644,0.000123,0.99977,0.000123,0.83311,0.000123,0.74977,0.000123,0.66644,0.000123]],
    faces: [42,0,1,2,0,0,1,2,0,1,2,42,2,3,0,0,2,3,0,2,3,0,42,1,4,5,0,1,4,5,1,4,5,42,5,2,1,0,5,2,1,5,2,1,42,4,6,7,0,4,6,7,4,6,7,42,7,5,4,0,7,5,4,7,5,4,42,6,8,9,0,6,8,9,6,8,9,42,9,7,6,0,9,7,6,9,7,6,42,8,10,11,0,8,10,11,8,10,11,42,11,9,8,0,11,9,8,11,9,8,42,10,12,13,0,10,12,13,10,12,13,42,13,11,10,0,13,11,10,13,11,10,42,12,14,15,0,12,14,15,12,14,15,42,15,13,12,0,15,13,12,15,13,12,42,14,16,17,0,16,17,18,14,16,17,42,17,15,14,0,18,19,16,17,15,14,42,16,18,19,0,17,20,21,16,18,19,42,19,17,16,0,21,18,17,19,17,16,42,18,20,21,0,20,22,23,18,20,21,42,21,19,18,0,23,21,20,21,19,18,42,20,22,23,0,22,24,25,20,22,23,42,23,21,20,0,25,23,22,23,21,20,42,22,0,3,0,24,0,3,22,0,3,42,3,23,22,0,3,25,24,3,23,22,42,3,2,24,0,3,2,26,3,2,24,42,24,25,3,0,26,27,3,24,25,3,42,2,5,26,0,2,5,28,2,5,26,42,26,24,2,0,28,26,2,26,24,2,42,5,7,27,0,5,7,29,5,7,27,42,27,26,5,0,29,28,5,27,26,5,42,7,9,28,0,7,9,30,7,9,28,42,28,27,7,0,30,29,7,28,27,7,42,9,11,29,0,9,11,31,9,11,29,42,29,28,9,0,31,30,9,29,28,9,42,11,13,30,0,11,13,32,11,13,30,42,30,29,11,0,32,31,11,30,29,11,42,13,15,31,0,13,15,33,13,15,31,42,31,30,13,0,33,32,13,31,30,13,42,15,17,32,0,19,18,34,15,17,32,42,32,31,15,0,34,35,19,32,31,15,42,17,19,33,0,18,21,36,17,19,33,42,33,32,17,0,36,34,18,33,32,17,42,19,21,34,0,21,23,37,19,21,34,42,34,33,19,0,37,36,21,34,33,19,42,21,23,35,0,23,25,38,21,23,35,42,35,34,21,0,38,37,23,35,34,21,42,23,3,25,0,25,3,27,23,3,25,42,25,35,23,0,27,38,25,25,35,23,42,25,24,36,0,27,26,39,25,24,36,42,36,37,25,0,39,40,27,36,37,25,42,24,26,38,0,26,28,41,24,26,38,42,38,36,24,0,41,39,26,38,36,24,42,26,27,39,0,28,29,42,26,27,39,42,39,38,26,0,42,41,28,39,38,26,42,27,28,40,0,29,30,43,27,28,40,42,40,39,27,0,43,42,29,40,39,27,42,28,29,41,0,30,31,44,28,29,41,42,41,40,28,0,44,43,30,41,40,28,42,29,30,42,0,31,32,45,29,30,42,42,42,41,29,0,45,44,31,42,41,29,42,30,31,43,0,32,33,46,30,31,43,42,43,42,30,0,46,45,32,43,42,30,42,31,32,44,0,35,34,47,31,32,44,42,44,43,31,0,47,48,35,44,43,31,42,32,33,45,0,34,36,49,32,33,45,42,45,44,32,0,49,47,34,45,44,32,42,33,34,46,0,36,37,50,33,34,46,42,46,45,33,0,50,49,36,46,45,33,42,34,35,47,0,37,38,51,34,35,47,42,47,46,34,0,51,50,37,47,46,34,42,35,25,37,0,38,27,40,35,25,37,42,37,47,35,0,40,51,38,37,47,35]
};

// this.materials.start = new THREE.MeshBasicMaterial({
//     map: this.lib.get("textures", "track.cityscape.start.diffuse"),
//     ambient: 0xcccccc
// });

// this.materials.startBanner = new THREE.MeshBasicMaterial({
//     map: this.lib.get("textures", "track.cityscape.start.banner"),
//     transparent: false
// });

// 'track.cityscape.start.diffuse'		: "textures.full/tracks/cityscape/start/diffuse.jpg",
// 'track.cityscape.start.specular'	: "textures.full/tracks/cityscape/start/specular.jpg",
// 'track.cityscape.start.normal'		: "textures.full/tracks/cityscape/start/normal.jpg",
// 'track.cityscape.start.banner'		: "textures.full/tracks/cityscape/start/start.jpg",

const startbanner = {
    "metadata" : {
        "formatVersion" : 3.1,
        "sourceFile"    : "startbanner.obj",
        "generatedBy"   : "OBJConverter",
        "vertices"      : 12,
        "faces"         : 10,
        "normals"       : 6,
        "colors"        : 0,
        "uvs"           : 12,
        "materials"     : 1
    },
    "scale" : 1.000000,
    "materials": [	{
	"DbgColor" : 15658734,
	"DbgIndex" : 0,
	"DbgName" : "13___Default",
	"colorAmbient" : [0.588235, 0.588235, 0.588235],
	"colorDiffuse" : [0.588235, 0.588235, 0.588235],
	"colorSpecular" : [0.0, 0.0, 0.0],
	"illumination" : 2,
	"opticalDensity" : 1.5,
	"specularCoef" : 9.999999,
	"transparency" : 0.0 }],
    "vertices": [-2308.439453,424.299988,-633.529297,-2290.839355,424.299988,-625.660400,-2290.839355,407.919983,-625.660400,-2308.439453,407.919983,-633.529297,-2273.239502,424.299988,-621.725891,-2273.239502,407.919983,-621.725891,-2255.639404,424.299988,-621.725891,-2255.639404,407.919983,-621.725891,-2238.039551,424.299988,-625.660400,-2238.039551,407.919983,-625.660400,-2220.439453,424.299988,-633.529297,-2220.439453,407.919983,-633.529297],
    "morphTargets": [],
    "morphColors": [],
    "normals": [0.40816,-0,-0.91291,0.31474,-0,-0.94918,0.10974,-0,-0.99396,-0.10974,-0,-0.99396,-0.31474,-0,-0.94918,-0.40816,-0,-0.91291],
    "colors": [],
    "uvs": [[1,1,0.8,1,0.8,0,1,0,0.6,1,0.6,0,0.4,1,0.4,0,0.2,1,0.2,0,0,1,0,0]],
    "faces": [42,0,1,2,0,0,1,2,0,1,1,42,2,3,0,0,2,3,0,1,0,0,42,1,4,5,0,1,4,5,1,2,2,42,5,2,1,0,5,2,1,2,1,1,42,4,6,7,0,4,6,7,2,3,3,42,7,5,4,0,7,5,4,3,2,2,42,6,8,9,0,6,8,9,3,4,4,42,9,7,6,0,9,7,6,4,3,3,42,8,10,11,0,8,10,11,4,5,5,42,11,9,8,0,11,9,8,5,4,4]
};

const startglyphs = {
    "metadata" : {
        "formatVersion" : 3.1,
        "sourceFile"    : "start.obj",
        "generatedBy"   : "OBJConverter",
        "vertices"      : 88,
        "faces"         : 160,
        "normals"       : 107,
        "colors"        : 0,
        "uvs"           : 34,
        "materials"     : 1
    },
    "scale" : 1.000000,
    "materials": [	{
	"DbgColor" : 15658734,
	"DbgIndex" : 0,
	"DbgName" : "Material__1",
	"colorAmbient" : [0.588, 0.588, 0.588],
	"colorDiffuse" : [0.588, 0.588, 0.588],
	"colorSpecular" : [0.0, 0.0, 0.0],
	"illumination" : 2,
	"opticalDensity" : 1.5,
	"specularCoef" : 10.0,
	"transparency" : 0.0 }],
    "vertices": [-2221.137695,382.633392,-632.025696,-2221.977539,382.633392,-633.480591,-2221.137695,382.633392,-634.935486,-2219.457520,382.633392,-634.935486,-2218.617676,382.633392,-633.480591,-2219.457520,382.633392,-632.025696,-2219.634766,391.436584,-634.628723,-2218.971924,391.436584,-633.480591,-2220.960449,391.436584,-634.628723,-2221.623291,391.436584,-633.480591,-2220.960449,391.436584,-632.332458,-2219.634766,391.436584,-632.332458,-2219.751465,399.634979,-634.426697,-2219.205078,399.634979,-633.480591,-2220.843994,399.634979,-634.426697,-2221.390137,399.634979,-633.480591,-2220.843994,399.634979,-632.534485,-2219.751465,399.634979,-632.534485,-2219.833496,407.631775,-634.284546,-2219.369385,407.631775,-633.480591,-2220.761719,407.631775,-634.284546,-2221.226074,407.631775,-633.480591,-2220.761719,407.631775,-632.676636,-2219.833496,407.631775,-632.676636,-2219.906982,415.830200,-634.157349,-2219.516113,415.830200,-633.480591,-2220.688232,415.830170,-634.157349,-2221.079102,415.830200,-633.480591,-2220.688232,415.830200,-632.803833,-2219.906982,415.830200,-632.803833,-2219.997559,424.633392,-634.000183,-2219.697510,424.633392,-633.480591,-2220.597656,424.633392,-634.000183,-2220.897705,424.633392,-633.480591,-2220.597656,424.633392,-632.960999,-2219.997559,424.633392,-632.960999,-2227.909668,431.478424,-633.860657,-2220.838623,419.354065,-640.931702,-2213.767578,419.354065,-633.860657,-2220.838623,431.478424,-626.789612,-2227.603516,431.653442,-634.166870,-2220.532471,431.653442,-627.095764,-2213.461426,419.529083,-634.166870,-2220.532471,419.529083,-641.237915,-2306.849854,382.633392,-633.101013,-2308.304688,382.633392,-632.261047,-2309.759521,382.633392,-633.101013,-2309.759521,382.633392,-634.781067,-2308.304688,382.633392,-635.621033,-2306.849854,382.633392,-634.781067,-2309.452881,391.436584,-634.603882,-2308.304688,391.436584,-635.266785,-2309.452881,391.436584,-633.278137,-2308.304688,391.436584,-632.615234,-2307.156494,391.436584,-633.278137,-2307.156494,391.436584,-634.603882,-2309.250732,399.634979,-634.487244,-2308.304688,399.634979,-635.033508,-2309.250732,399.634979,-633.394775,-2308.304688,399.634979,-632.848511,-2307.358643,399.634979,-633.394775,-2307.358643,399.634979,-634.487244,-2309.108643,407.631775,-634.405151,-2308.304688,407.631775,-634.869324,-2309.108643,407.631775,-633.476868,-2308.304688,407.631775,-633.012695,-2307.500732,407.631775,-633.476868,-2307.500732,407.631775,-634.405151,-2308.981445,415.830200,-634.331726,-2308.304688,415.830200,-634.722473,-2308.981445,415.830170,-633.550293,-2308.304688,415.830200,-633.159607,-2307.627930,415.830200,-633.550293,-2307.627930,415.830200,-634.331726,-2308.824219,424.633392,-634.241028,-2308.304688,424.633392,-634.541016,-2308.824219,424.633392,-633.641052,-2308.304688,424.633392,-633.341064,-2307.785156,424.633392,-633.641052,-2307.785156,424.633392,-634.241028,-2308.684814,431.478424,-626.328979,-2315.755859,419.354065,-633.400024,-2308.684814,419.354065,-640.471069,-2301.613770,431.478424,-633.400024,-2308.990967,431.653442,-626.635132,-2301.919922,431.653442,-633.706238,-2308.990967,419.529083,-640.777283,-2316.062012,419.529083,-633.706238],
    "morphTargets": [],
    "morphColors": [],
    "normals": [0,-1,-0,0.9996,0.028159,-0,0.4998,0.028158,-0.86568,0.49985,0.024068,-0.86577,0.99971,0.024069,0,-0.4998,0.028156,-0.86568,-0.49985,0.024067,-0.86577,-0.9996,0.028155,-0,-0.99971,0.024066,0,-0.4998,0.028155,0.86568,-0.49985,0.024066,0.86577,0.4998,0.028157,0.86568,0.49985,0.024068,0.86577,0.49993,0.017157,-0.8659,0.99985,0.017157,0,-0.49993,0.017156,-0.8659,-0.99985,0.017156,0,-0.49993,0.017156,0.8659,0.49993,0.017157,0.8659,0.49995,0.013458,-0.86595,0.99991,0.013458,0,-0.49995,0.013458,-0.86595,-0.99991,0.013459,0,-0.49995,0.013458,0.86595,0.49995,0.013458,0.86595,0.49995,0.013478,-0.86595,0.99991,0.013478,0,-0.49995,0.013479,-0.86595,-0.99991,0.01348,0,-0.49995,0.01348,0.86595,0.49995,0.013479,0.86595,0.49995,0.014425,-0.86593,0.9999,0.014424,1e-06,-0.49995,0.014427,-0.86594,-0.9999,0.014428,2e-06,-0.49994,0.014427,0.86594,0.49995,0.014425,0.86594,-4e-06,1,-5e-06,-6e-06,1,-4e-06,-7e-06,1,-6e-06,-1.3e-05,1,-7e-06,-5e-06,1,-6e-06,0,1,-0,-0.61237,-0.5,0.61237,0.61237,0.5,-0.61237,-0.35355,0.86603,0.35355,-0.35355,0.86603,0.35355,0.70711,-0,0.70711,0.70711,0,0.70711,0.35355,-0.86603,-0.35355,0.35355,-0.86603,-0.35355,-0.70711,0,-0.70711,-0.70711,0,-0.70711,0,-1,-0,-0,0.028159,-0.9996,-0.86568,0.028158,-0.4998,-0.86577,0.024068,-0.49985,-0,0.024069,-0.99971,-0.86568,0.028156,0.4998,-0.86577,0.024067,0.49985,-0,0.028155,0.9996,0,0.024066,0.99971,0.86568,0.028155,0.4998,0.86577,0.024066,0.49985,0.86568,0.028157,-0.4998,0.86577,0.024068,-0.49985,-0.8659,0.017157,-0.49993,0,0.017157,-0.99985,-0.8659,0.017156,0.49993,0,0.017156,0.99985,0.8659,0.017156,0.49993,0.8659,0.017157,-0.49993,-0.86595,0.013458,-0.49995,0,0.013458,-0.99991,-0.86595,0.013458,0.49995,0,0.013459,0.99991,0.86595,0.013458,0.49995,0.86595,0.013458,-0.49995,-0.86595,0.013478,-0.49995,0,0.013478,-0.99991,-0.86595,0.013479,0.49995,0,0.01348,0.99991,0.86595,0.01348,0.49995,0.86595,0.013479,-0.49995,-0.86593,0.014425,-0.49995,1e-06,0.014424,-0.9999,-0.86594,0.014427,0.49995,2e-06,0.014428,0.9999,0.86594,0.014427,0.49994,0.86594,0.014425,-0.49995,-5e-06,1,4e-06,-4e-06,1,6e-06,-6e-06,1,7e-06,-7e-06,1,1.3e-05,-6e-06,1,5e-06,0,1,-0,0.61237,-0.5,0.61237,-0.61237,0.5,-0.61237,0.35355,0.86603,0.35355,0.35355,0.86603,0.35355,0.35355,0.86603,0.35355,0.70711,-0,-0.70711,0.70711,0,-0.70711,-0.35355,-0.86603,-0.35355,-0.35355,-0.86603,-0.35355,-0.70711,0,0.70711,-0.70711,0,0.70711],
    "colors": [],
    "uvs": [[0.67171,0.014781,0.67391,0.016977,0.6731,0.019977,0.6701,0.020781,0.66791,0.018585,0.66871,0.015585,0.68,0,1,0,1,1,0.68,1,0,-0,0.66034,-0,0.66034,1,0,1,0,0.99,0.66,0.99,0.66,1,0.67171,0.014781,0.67391,0.016977,0.6731,0.019977,0.6701,0.020781,0.66791,0.018585,0.66871,0.015585,0.68,0,1,0,1,1,0.68,1,0,-0,0.66034,-0,0.66034,1,0,1,0,0.99,0.66,0.99,0.66,1]],
    "faces": [42,0,1,2,0,0,1,2,0,0,0,42,2,3,4,0,2,3,4,0,0,0,42,0,2,4,0,0,2,4,0,0,0,42,5,0,4,0,5,0,4,0,0,0,42,4,3,6,0,6,7,8,1,2,3,42,6,7,4,0,8,9,6,3,4,1,42,3,2,8,0,6,7,8,2,5,6,42,8,6,3,0,8,9,6,6,3,2,42,2,1,9,0,6,7,8,5,7,8,42,9,8,2,0,8,9,6,8,6,5,42,1,0,10,0,6,7,8,7,9,10,42,10,9,1,0,8,9,6,10,8,7,42,0,5,11,0,6,7,8,9,11,12,42,11,10,0,0,8,9,6,12,10,9,42,5,4,7,0,6,7,8,11,1,4,42,7,11,5,0,8,9,6,4,12,11,42,7,6,12,0,6,7,8,4,3,13,42,12,13,7,0,8,9,6,13,14,4,42,6,8,14,0,6,7,8,3,6,15,42,14,12,6,0,8,9,6,15,13,3,42,8,9,15,0,6,7,8,6,8,16,42,15,14,8,0,8,9,6,16,15,6,42,9,10,16,0,6,7,8,8,10,17,42,16,15,9,0,8,9,6,17,16,8,42,10,11,17,0,6,7,8,10,12,18,42,17,16,10,0,8,9,6,18,17,10,42,11,7,13,0,6,7,8,12,4,14,42,13,17,11,0,8,9,6,14,18,12,42,13,12,18,0,6,7,8,14,13,19,42,18,19,13,0,8,9,6,19,20,14,42,12,14,20,0,6,7,8,13,15,21,42,20,18,12,0,8,9,6,21,19,13,42,14,15,21,0,6,7,8,15,16,22,42,21,20,14,0,8,9,6,22,21,15,42,15,16,22,0,6,7,8,16,17,23,42,22,21,15,0,8,9,6,23,22,16,42,16,17,23,0,6,7,8,17,18,24,42,23,22,16,0,8,9,6,24,23,17,42,17,13,19,0,6,7,8,18,14,20,42,19,23,17,0,8,9,6,20,24,18,42,19,18,24,0,6,7,8,20,19,25,42,24,25,19,0,8,9,6,25,26,20,42,18,20,26,0,6,7,8,19,21,27,42,26,24,18,0,8,9,6,27,25,19,42,20,21,27,0,6,7,8,21,22,28,42,27,26,20,0,8,9,6,28,27,21,42,21,22,28,0,6,7,8,22,23,29,42,28,27,21,0,8,9,6,29,28,22,42,22,23,29,0,6,7,8,23,24,30,42,29,28,22,0,8,9,6,30,29,23,42,23,19,25,0,6,7,8,24,20,26,42,25,29,23,0,8,9,6,26,30,24,42,25,24,30,0,6,7,8,26,25,31,42,30,31,25,0,8,9,6,31,32,26,42,24,26,32,0,6,7,8,25,27,33,42,32,30,24,0,8,9,6,33,31,25,42,26,27,33,0,6,7,8,27,28,34,42,33,32,26,0,8,9,6,34,33,27,42,27,28,34,0,6,7,8,28,29,35,42,34,33,27,0,8,9,6,35,34,28,42,28,29,35,0,6,7,8,29,30,36,42,35,34,28,0,8,9,6,36,35,29,42,29,25,31,0,6,7,8,30,26,32,42,31,35,29,0,8,9,6,32,36,30,42,31,30,32,0,0,1,2,37,38,39,42,32,33,34,0,2,3,4,39,40,41,42,31,32,34,0,0,2,4,37,39,41,42,35,31,34,0,5,0,4,42,37,41,42,36,37,38,0,10,11,12,43,43,43,42,38,39,36,0,12,13,10,43,43,43,42,40,41,42,0,10,11,12,44,44,44,42,42,43,40,0,12,13,10,44,44,44,42,36,39,41,0,14,15,16,45,46,46,42,41,40,36,0,16,13,14,46,45,45,42,39,38,42,0,14,15,16,47,48,48,42,42,41,39,0,16,13,14,48,47,47,42,38,37,43,0,14,15,16,49,50,50,42,43,42,38,0,16,13,14,50,49,49,42,37,36,40,0,14,15,16,51,52,52,42,40,43,37,0,16,13,14,52,51,51,42,44,45,46,0,17,18,19,53,53,53,42,46,47,48,0,19,20,21,53,53,53,42,44,46,48,0,17,19,21,53,53,53,42,49,44,48,0,22,17,21,53,53,53,42,48,47,50,0,23,24,25,54,55,56,42,50,51,48,0,25,26,23,56,57,54,42,47,46,52,0,23,24,25,55,58,59,42,52,50,47,0,25,26,23,59,56,55,42,46,45,53,0,23,24,25,58,60,61,42,53,52,46,0,25,26,23,61,59,58,42,45,44,54,0,23,24,25,60,62,63,42,54,53,45,0,25,26,23,63,61,60,42,44,49,55,0,23,24,25,62,64,65,42,55,54,44,0,25,26,23,65,63,62,42,49,48,51,0,23,24,25,64,54,57,42,51,55,49,0,25,26,23,57,65,64,42,51,50,56,0,23,24,25,57,56,66,42,56,57,51,0,25,26,23,66,67,57,42,50,52,58,0,23,24,25,56,59,68,42,58,56,50,0,25,26,23,68,66,56,42,52,53,59,0,23,24,25,59,61,69,42,59,58,52,0,25,26,23,69,68,59,42,53,54,60,0,23,24,25,61,63,70,42,60,59,53,0,25,26,23,70,69,61,42,54,55,61,0,23,24,25,63,65,71,42,61,60,54,0,25,26,23,71,70,63,42,55,51,57,0,23,24,25,65,57,67,42,57,61,55,0,25,26,23,67,71,65,42,57,56,62,0,23,24,25,67,66,72,42,62,63,57,0,25,26,23,72,73,67,42,56,58,64,0,23,24,25,66,68,74,42,64,62,56,0,25,26,23,74,72,66,42,58,59,65,0,23,24,25,68,69,75,42,65,64,58,0,25,26,23,75,74,68,42,59,60,66,0,23,24,25,69,70,76,42,66,65,59,0,25,26,23,76,75,69,42,60,61,67,0,23,24,25,70,71,77,42,67,66,60,0,25,26,23,77,76,70,42,61,57,63,0,23,24,25,71,67,73,42,63,67,61,0,25,26,23,73,77,71,42,63,62,68,0,23,24,25,73,72,78,42,68,69,63,0,25,26,23,78,79,73,42,62,64,70,0,23,24,25,72,74,80,42,70,68,62,0,25,26,23,80,78,72,42,64,65,71,0,23,24,25,74,75,81,42,71,70,64,0,25,26,23,81,80,74,42,65,66,72,0,23,24,25,75,76,82,42,72,71,65,0,25,26,23,82,81,75,42,66,67,73,0,23,24,25,76,77,83,42,73,72,66,0,25,26,23,83,82,76,42,67,63,69,0,23,24,25,77,73,79,42,69,73,67,0,25,26,23,79,83,77,42,69,68,74,0,23,24,25,79,78,84,42,74,75,69,0,25,26,23,84,85,79,42,68,70,76,0,23,24,25,78,80,86,42,76,74,68,0,25,26,23,86,84,78,42,70,71,77,0,23,24,25,80,81,87,42,77,76,70,0,25,26,23,87,86,80,42,71,72,78,0,23,24,25,81,82,88,42,78,77,71,0,25,26,23,88,87,81,42,72,73,79,0,23,24,25,82,83,89,42,79,78,72,0,25,26,23,89,88,82,42,73,69,75,0,23,24,25,83,79,85,42,75,79,73,0,25,26,23,85,89,83,42,75,74,76,0,17,18,19,90,91,92,42,76,77,78,0,19,20,21,92,93,94,42,75,76,78,0,17,19,21,90,92,94,42,79,75,78,0,22,17,21,95,90,94,42,80,81,82,0,27,28,29,96,96,96,42,82,83,80,0,29,30,27,96,96,96,42,84,85,86,0,27,28,29,97,97,97,42,86,87,84,0,29,30,27,97,97,97,42,80,83,85,0,31,32,33,98,99,100,42,85,84,80,0,33,30,31,100,98,98,42,83,82,86,0,31,32,33,101,102,102,42,86,85,83,0,33,30,31,102,101,101,42,82,81,87,0,31,32,33,103,104,104,42,87,86,82,0,33,30,31,104,103,103,42,81,80,84,0,31,32,33,105,106,106,42,84,87,81,0,33,30,31,106,105,105]
};

// var bonusSpeed = ctx.createMesh(scene, this.lib.get("geometries", "track.cityscape.bonus.speed"), 0, -5, 0, this.materials.bonusSpeed);
// bonusSpeed.receiveShadow = false;

// this.materials.bonusSpeed = new THREE.MeshBasicMaterial({
//     color: 0x0096ff
// });

const bonusspeed = {
    "metadata" : {
        "formatVersion" : 3.1,
        "sourceFile"    : "speed.obj",
        "generatedBy"   : "OBJConverter",
        "vertices"      : 224,
        "faces"         : 168,
        "normals"       : 14,
        "colors"        : 0,
        "uvs"           : 168,
        "materials"     : 1
    },
    "scale" : 1.000000,
    "materials": [	{
	"DbgColor" : 15658734,
	"DbgIndex" : 0,
	"DbgName" : "08___Default",
	"colorAmbient" : [0.0, 0.470588, 1.0],
	"colorDiffuse" : [0.0, 0.470588, 1.0],
	"colorSpecular" : [0.0, 0.0, 0.0],
	"illumination" : 2,
	"opticalDensity" : 1.5,
	"specularCoef" : 9.999999,
	"transparency" : 0.0 }],
    "vertices": [-2207.104980,384.284088,-1439.154175,-2213.053955,384.284088,-1439.934570,-2215.395020,384.284088,-1422.087402,-2208.665771,384.284088,-1427.256104,-2219.783447,384.284088,-1434.765869,-2222.124512,384.284088,-1416.918823,-2225.732422,384.284088,-1435.546265,-2228.073486,384.284088,-1417.699097,-2230.901123,384.284088,-1442.275635,-2233.242188,384.284088,-1424.428467,-2236.850098,384.284088,-1443.056030,-2238.410889,384.284088,-1431.157959,-2212.273682,384.284088,-1445.883667,-2230.120850,384.284088,-1448.224731,-2224.952148,384.284088,-1441.495239,-2219.003174,384.284088,-1440.714966,-1802.347412,427.065033,24.983397,-1803.133911,426.283112,30.880005,-1785.847290,430.410278,33.733055,-1790.822998,429.816467,26.885429,-1798.158203,426.876892,37.727631,-1780.871704,431.004059,40.580677,-1798.944824,426.094971,43.624237,-1781.658203,430.222137,46.477287,-1805.493530,423.937317,48.569828,-1788.206909,428.064514,51.422878,-1806.280029,423.155396,54.466434,-1794.755615,425.906860,56.368469,-1808.896118,424.907379,29.928989,-1811.255737,422.561615,47.618813,-1804.706909,424.719269,42.673222,-1803.920410,425.501190,36.776611,-1430.312866,371.850159,-1600.584717,-1429.984497,371.821167,-1594.593750,-1412.081299,370.240601,-1595.582764,-1418.377441,370.796448,-1601.244019,-1423.688354,371.265320,-1588.932495,-1405.785156,369.684753,-1589.921631,-1423.359863,371.236328,-1582.941528,-1405.456787,369.655762,-1583.930664,-1428.999268,371.734192,-1576.620972,-1411.096069,370.153625,-1577.609985,-1428.670776,371.705200,-1570.630005,-1416.735352,370.651489,-1571.289429,-1435.952148,372.348022,-1594.264038,-1434.966919,372.261047,-1576.291260,-1429.327637,371.763184,-1582.611816,-1429.656006,371.792175,-1588.602783,-760.376465,411.521362,-201.897675,-765.971619,410.747253,-203.921402,-772.324890,413.054565,-187.238724,-764.612000,413.059570,-190.775879,-773.684448,410.742279,-200.384247,-780.037781,413.049591,-183.701569,-779.279602,409.968170,-202.407990,-785.632874,412.275482,-185.725296,-782.756958,408.424988,-209.992615,-789.110229,410.732300,-193.309921,-788.352051,407.650879,-212.016342,-792.587585,409.189087,-200.894562,-763.853821,409.978149,-209.482300,-780.639160,407.655884,-215.553513,-777.161804,409.199066,-207.968872,-771.566711,409.973175,-205.945145,1052.028809,851.673035,-143.287369,1050.197998,851.673035,-137.573517,1067.339600,851.673035,-132.081070,1063.456543,851.673035,-139.625732,1054.081055,851.673035,-130.028854,1071.222656,851.673035,-124.536400,1052.250244,851.673035,-124.315002,1069.391846,851.673035,-118.822548,1044.705566,851.673035,-120.431969,1061.847168,851.673035,-114.939514,1042.874756,851.673035,-114.718117,1054.302490,851.673035,-111.056480,1044.484131,851.673035,-139.404343,1038.991699,851.673035,-122.262787,1046.536377,851.673035,-126.145821,1048.367188,851.673035,-131.859665,114.764381,387.355591,1345.013306,116.528221,387.487000,1339.279907,99.332870,387.016846,1333.979126,103.300812,387.042175,1341.479492,112.560280,387.461670,1331.779663,95.364922,386.991516,1326.478760,114.324112,387.593048,1326.046265,97.128761,387.122894,1320.745483,121.819740,387.881165,1322.079834,104.624382,387.411011,1316.779053,123.583580,388.012543,1316.346436,112.120010,387.699097,1312.812500,122.260010,387.643707,1341.046875,127.551521,388.037872,1323.846802,120.055901,387.749756,1327.813232,118.292061,387.618378,1333.546509,103.300232,386.091064,1382.094238,105.064072,386.222473,1376.360840,87.868721,385.752319,1371.060059,91.836662,385.777649,1378.560425,101.096130,386.197144,1368.860596,83.900772,385.726990,1363.559692,102.859962,386.328522,1363.127197,85.664612,385.858368,1357.826416,110.355591,386.616638,1359.160767,93.160233,386.146484,1353.859863,112.119431,386.748016,1353.427368,100.655861,386.434570,1349.893433,110.795860,386.379181,1378.127808,116.087372,386.773346,1360.927734,108.591751,386.485229,1364.894165,106.827911,386.353851,1370.627441,-1443.524658,384.385132,623.153931,-1441.941772,384.329498,617.366760,-1459.304077,384.279449,612.618347,-1455.099609,384.351746,619.988281,-1446.146362,384.257172,609.996765,-1463.508667,384.207123,605.248352,-1444.563477,384.201538,604.209595,-1461.925781,384.151489,599.461182,-1437.193115,384.162598,600.005249,-1454.555420,384.112549,595.256836,-1435.610229,384.106964,594.218079,-1447.185059,384.073608,591.052490,-1436.154419,384.346191,618.949585,-1431.405640,384.179291,601.588074,-1438.776001,384.218231,605.792419,-1440.358887,384.273865,611.579590,-42.320881,853.625244,2018.186035,-45.366199,853.731445,2023.354614,-30.152107,850.421692,2032.386597,-32.178154,851.418762,2024.207275,-43.340153,852.734314,2031.533936,-28.126060,849.424561,2040.565918,-46.385468,852.840454,2036.702515,-31.171377,849.530701,2045.734497,-54.502151,854.049866,2038.860474,-39.288059,850.740112,2047.892578,-57.547466,854.156006,2044.029175,-47.404739,851.949524,2050.050537,-50.437561,854.834656,2020.343994,-59.573517,855.153137,2035.849854,-51.456833,853.943726,2033.691895,-48.411514,853.837585,2028.523315,-61.953083,854.311218,2051.485840,-64.998398,854.417419,2056.654541,-49.784309,851.107666,2065.686523,-51.810356,852.104736,2057.507080,-62.972355,853.420288,2064.833740,-47.758263,850.110535,2073.865723,-66.017670,853.526428,2070.002441,-50.803581,850.216675,2079.034424,-74.134354,854.735840,2072.160400,-58.920261,851.426086,2081.192383,-77.179672,854.841980,2077.328857,-67.036942,852.635498,2083.350342,-70.069763,855.520630,2053.643799,-79.205719,855.839111,2069.149658,-71.089035,854.629700,2066.991699,-68.043716,854.523560,2061.822998,1281.115479,576.173218,2153.229492,1282.232910,575.313293,2159.061523,1298.392090,568.524048,2154.964111,1291.888184,571.647034,2150.498047,1288.736816,572.190308,2163.527588,1304.895874,565.401001,2159.430420,1289.854248,571.330383,2169.359619,1306.013428,564.541138,2165.262451,1285.585327,572.733582,2176.557373,1301.744507,565.944336,2172.459961,1286.702759,571.873657,2182.389404,1297.475586,567.347473,2179.657715,1276.846558,577.576355,2160.427246,1280.198975,574.996643,2177.923096,1284.467896,573.593506,2170.725342,1283.350342,574.453369,2164.893311,1535.597290,68.655907,-300.844513,1537.079102,68.646652,-306.658661,1519.683838,67.317024,-311.090057,1524.000488,67.769485,-303.798798,1532.762573,68.194191,-313.949921,1515.367310,66.864563,-318.381317,1534.244385,68.184937,-319.764038,1516.849121,66.855309,-324.195435,1541.524658,68.618889,-324.101013,1524.129395,67.289261,-328.532440,1543.006470,68.609634,-329.915161,1531.409668,67.723221,-332.869415,1542.877563,69.089859,-305.181519,1547.323120,69.062096,-322.623901,1540.042847,68.628143,-318.286896,1538.561035,68.637398,-312.472778,871.145081,320.166382,-2086.600342,872.894653,321.076111,-2092.266846,855.751770,323.559509,-2097.161133,859.716431,321.821991,-2089.863037,868.929932,322.813629,-2099.564941,851.787048,325.297028,-2104.459229,870.679565,323.723358,-2105.231689,853.536621,326.206726,-2110.125977,878.143433,323.805267,-2109.267090,861.000549,326.288666,-2114.161133,879.893066,324.714996,-2114.933594,868.464478,326.370575,-2118.196533,878.608948,320.248322,-2090.635498,883.857788,322.977478,-2107.635498,876.393860,322.895538,-2103.600342,874.644287,321.985840,-2097.933594,-861.231567,384.284088,-2366.130615,-861.028748,384.284088,-2372.127197,-879.018433,384.284088,-2372.735596,-873.224670,384.284088,-2366.536133,-866.822510,384.284088,-2378.326416,-884.812195,384.284088,-2378.934814,-866.619690,384.284088,-2384.322998,-884.609375,384.284088,-2384.931396,-860.420288,384.284088,-2390.116699,-878.409973,384.284088,-2390.725342,-860.217468,384.284088,-2396.113281,-872.210632,384.284088,-2396.519043,-855.032166,384.284088,-2371.924316,-854.423706,384.284088,-2389.914063,-860.623108,384.284088,-2384.120361,-860.825928,384.284088,-2378.123779],
    "morphTargets": [],
    "morphColors": [],
    "normals": [0,1,-0,-0.24599,0.96459,0.095099,0.087943,0.99613,0,-0.076339,0.98332,-0.16507,0,1,-0,-0.031408,0.99942,0.013241,-0.031408,0.99942,0.013241,-0.000236,0.99995,-0.009677,0.16727,0.98279,0.078373,0.16727,0.98279,0.078373,0.39924,0.91498,0.058413,-0.0712,0.99727,-0.019734,0.089076,0.97876,0.18463,0,1,-0],
    "colors": [],
    "uvs": [[0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1,0,0,0.2,0,0.2,1,0,1,0.4,0,0.4,1,0.6,0,0.6,1,0.8,0,0.8,1,1,0,1,1]],
    "faces": [42,0,1,2,0,0,1,2,0,0,0,42,2,3,0,0,2,3,0,0,0,0,42,1,4,5,0,1,4,5,0,0,0,42,5,2,1,0,5,2,1,0,0,0,42,4,6,7,0,4,6,7,0,0,0,42,7,5,4,0,7,5,4,0,0,0,42,6,8,9,0,6,8,9,0,0,0,42,9,7,6,0,9,7,6,0,0,0,42,8,10,11,0,8,10,11,0,0,0,42,11,9,8,0,11,9,8,0,0,0,42,12,13,14,0,0,10,11,0,0,0,42,14,15,12,0,11,3,0,0,0,0,42,16,17,18,0,12,13,14,1,1,1,42,18,19,16,0,14,15,12,1,1,1,42,17,20,21,0,13,16,17,1,1,1,42,21,18,17,0,17,14,13,1,1,1,42,20,22,23,0,16,18,19,1,1,1,42,23,21,20,0,19,17,16,1,1,1,42,22,24,25,0,18,20,21,1,1,1,42,25,23,22,0,21,19,18,1,1,1,42,24,26,27,0,20,22,23,1,1,1,42,27,25,24,0,23,21,20,1,1,1,42,28,29,30,0,12,22,23,1,1,1,42,30,31,28,0,23,15,12,1,1,1,42,32,33,34,0,24,25,26,2,2,2,42,34,35,32,0,26,27,24,2,2,2,42,33,36,37,0,25,28,29,2,2,2,42,37,34,33,0,29,26,25,2,2,2,42,36,38,39,0,28,30,31,2,2,2,42,39,37,36,0,31,29,28,2,2,2,42,38,40,41,0,30,32,33,2,2,2,42,41,39,38,0,33,31,30,2,2,2,42,40,42,43,0,32,34,35,2,2,2,42,43,41,40,0,35,33,32,2,2,2,42,44,45,46,0,24,34,35,2,2,2,42,46,47,44,0,35,27,24,2,2,2,42,48,49,50,0,36,37,38,3,3,3,42,50,51,48,0,38,39,36,3,3,3,42,49,52,53,0,37,40,41,3,3,3,42,53,50,49,0,41,38,37,3,3,3,42,52,54,55,0,40,42,43,3,3,3,42,55,53,52,0,43,41,40,3,3,3,42,54,56,57,0,42,44,45,3,3,3,42,57,55,54,0,45,43,42,3,3,3,42,56,58,59,0,44,46,47,3,3,3,42,59,57,56,0,47,45,44,3,3,3,42,60,61,62,0,36,46,47,3,3,3,42,62,63,60,0,47,39,36,3,3,3,42,64,65,66,0,48,49,50,4,4,4,42,66,67,64,0,50,51,48,4,4,4,42,65,68,69,0,49,52,53,4,4,4,42,69,66,65,0,53,50,49,4,4,4,42,68,70,71,0,52,54,55,4,4,4,42,71,69,68,0,55,53,52,4,4,4,42,70,72,73,0,54,56,57,4,4,4,42,73,71,70,0,57,55,54,4,4,4,42,72,74,75,0,56,58,59,4,4,4,42,75,73,72,0,59,57,56,4,4,4,42,76,77,78,0,48,58,59,4,4,4,42,78,79,76,0,59,51,48,4,4,4,42,80,81,82,0,60,61,62,5,5,5,42,82,83,80,0,62,63,60,5,5,5,42,81,84,85,0,61,64,65,5,5,5,42,85,82,81,0,65,62,61,5,5,5,42,84,86,87,0,64,66,67,5,5,5,42,87,85,84,0,67,65,64,5,5,5,42,86,88,89,0,66,68,69,5,5,5,42,89,87,86,0,69,67,66,5,5,5,42,88,90,91,0,68,70,71,5,5,5,42,91,89,88,0,71,69,68,5,5,5,42,92,93,94,0,60,70,71,5,5,5,42,94,95,92,0,71,63,60,5,5,5,42,96,97,98,0,72,73,74,6,6,6,42,98,99,96,0,74,75,72,6,6,6,42,97,100,101,0,73,76,77,6,6,6,42,101,98,97,0,77,74,73,6,6,6,42,100,102,103,0,76,78,79,6,6,6,42,103,101,100,0,79,77,76,6,6,6,42,102,104,105,0,78,80,81,6,6,6,42,105,103,102,0,81,79,78,6,6,6,42,104,106,107,0,80,82,83,6,6,6,42,107,105,104,0,83,81,80,6,6,6,42,108,109,110,0,72,82,83,6,6,6,42,110,111,108,0,83,75,72,6,6,6,42,112,113,114,0,84,85,86,7,7,7,42,114,115,112,0,86,87,84,7,7,7,42,113,116,117,0,85,88,89,7,7,7,42,117,114,113,0,89,86,85,7,7,7,42,116,118,119,0,88,90,91,7,7,7,42,119,117,116,0,91,89,88,7,7,7,42,118,120,121,0,90,92,93,7,7,7,42,121,119,118,0,93,91,90,7,7,7,42,120,122,123,0,92,94,95,7,7,7,42,123,121,120,0,95,93,92,7,7,7,42,124,125,126,0,84,94,95,7,7,7,42,126,127,124,0,95,87,84,7,7,7,42,128,129,130,0,96,97,98,8,8,8,42,130,131,128,0,98,99,96,8,8,8,42,129,132,133,0,97,100,101,8,8,8,42,133,130,129,0,101,98,97,8,8,8,42,132,134,135,0,100,102,103,8,8,8,42,135,133,132,0,103,101,100,8,8,8,42,134,136,137,0,102,104,105,8,8,8,42,137,135,134,0,105,103,102,8,8,8,42,136,138,139,0,104,106,107,8,8,8,42,139,137,136,0,107,105,104,8,8,8,42,140,141,142,0,96,106,107,8,8,8,42,142,143,140,0,107,99,96,8,8,8,42,144,145,146,0,108,109,110,9,9,9,42,146,147,144,0,110,111,108,9,9,9,42,145,148,149,0,109,112,113,9,9,9,42,149,146,145,0,113,110,109,9,9,9,42,148,150,151,0,112,114,115,9,9,9,42,151,149,148,0,115,113,112,9,9,9,42,150,152,153,0,114,116,117,9,9,9,42,153,151,150,0,117,115,114,9,9,9,42,152,154,155,0,116,118,119,9,9,9,42,155,153,152,0,119,117,116,9,9,9,42,156,157,158,0,108,118,119,9,9,9,42,158,159,156,0,119,111,108,9,9,9,42,160,161,162,0,120,121,122,10,10,10,42,162,163,160,0,122,123,120,10,10,10,42,161,164,165,0,121,124,125,10,10,10,42,165,162,161,0,125,122,121,10,10,10,42,164,166,167,0,124,126,127,10,10,10,42,167,165,164,0,127,125,124,10,10,10,42,166,168,169,0,126,128,129,10,10,10,42,169,167,166,0,129,127,126,10,10,10,42,168,170,171,0,128,130,131,10,10,10,42,171,169,168,0,131,129,128,10,10,10,42,172,173,174,0,120,130,131,10,10,10,42,174,175,172,0,131,123,120,10,10,10,42,176,177,178,0,132,133,134,11,11,11,42,178,179,176,0,134,135,132,11,11,11,42,177,180,181,0,133,136,137,11,11,11,42,181,178,177,0,137,134,133,11,11,11,42,180,182,183,0,136,138,139,11,11,11,42,183,181,180,0,139,137,136,11,11,11,42,182,184,185,0,138,140,141,11,11,11,42,185,183,182,0,141,139,138,11,11,11,42,184,186,187,0,140,142,143,11,11,11,42,187,185,184,0,143,141,140,11,11,11,42,188,189,190,0,132,142,143,11,11,11,42,190,191,188,0,143,135,132,11,11,11,42,192,193,194,0,144,145,146,12,12,12,42,194,195,192,0,146,147,144,12,12,12,42,193,196,197,0,145,148,149,12,12,12,42,197,194,193,0,149,146,145,12,12,12,42,196,198,199,0,148,150,151,12,12,12,42,199,197,196,0,151,149,148,12,12,12,42,198,200,201,0,150,152,153,12,12,12,42,201,199,198,0,153,151,150,12,12,12,42,200,202,203,0,152,154,155,12,12,12,42,203,201,200,0,155,153,152,12,12,12,42,204,205,206,0,144,154,155,12,12,12,42,206,207,204,0,155,147,144,12,12,12,42,208,209,210,0,156,157,158,13,13,13,42,210,211,208,0,158,159,156,13,13,13,42,209,212,213,0,157,160,161,13,13,13,42,213,210,209,0,161,158,157,13,13,13,42,212,214,215,0,160,162,163,13,13,13,42,215,213,212,0,163,161,160,13,13,13,42,214,216,217,0,162,164,165,13,13,13,42,217,215,214,0,165,163,162,13,13,13,42,216,218,219,0,164,166,167,13,13,13,42,219,217,216,0,167,165,164,13,13,13,42,220,221,222,0,156,166,167,13,13,13,42,222,223,220,0,167,159,156,13,13,13]
};

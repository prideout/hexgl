!function(e){var r={};function t(s){if(r[s])return r[s].exports;var n=r[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(s,n,function(r){return e[r]}.bind(null,n));return s},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";r.__esModule=!0,t(1);var s=t(2),n=t(4),i=t(5),o=t(6),a=t(7),c="env/syferfontein_18d_clear_2k",l=c+"_ibl"+Filament.getSupportedFormatSuffix("etc s3tc")+".ktx.bmp",u=c+"_skybox_tiny.ktx.bmp",p=c+"_skybox.ktx.bmp",h="materials/tracks.filamat",f=function(){function e(e){var r=this;this.canvas=e,this.engine=Filament.Engine.create(e),this.scene=this.engine.createScene(),this.skybox=this.engine.createSkyFromKtx(u),this.scene.setSkybox(this.skybox),this.indirectLight=this.engine.createIblFromKtx(l),this.indirectLight.setIntensity(1e5),this.scene.setIndirectLight(this.indirectLight),this.swapChain=this.engine.createSwapChain(),this.renderer=this.engine.createRenderer(),this.camera=this.engine.createCamera(),this.view=this.engine.createView(),this.view.setCamera(this.camera),this.view.setScene(this.scene),Filament.fetch([p,h],function(){var e=n.processMesh(a.Track.faces,a.Track.vertices,a.Track.uvs,a.Track.normals),t=n.processMesh(i.Scrapers1.faces,i.Scrapers1.vertices,i.Scrapers1.uvs,i.Scrapers1.normals),s=n.processMesh(o.Scrapers2.faces,o.Scrapers2.vertices,o.Scrapers2.uvs,o.Scrapers2.normals);console.info(a.Track.vertices.length/3,e.length/3,Math.max.apply(null,e)),console.info(i.Scrapers1.vertices.length/3,t.length/3,Math.max.apply(null,t)),console.info(o.Scrapers2.vertices.length/3,s.length/3,Math.max.apply(null,s)),r.engine.destroySkybox(r.skybox),r.skybox=r.engine.createSkyFromKtx(p),r.scene.setSkybox(r.skybox)});this.camera.lookAt([0,0,4],[0,0,0],[0,1,0]),this.render=this.render.bind(this),this.resize=this.resize.bind(this),window.addEventListener("resize",this.resize),this.resize(),window.requestAnimationFrame(this.render)}return e.prototype.render=function(){this.renderer.render(this.swapChain,this.view),window.requestAnimationFrame(this.render)},e.prototype.resize=function(){var e=window.devicePixelRatio,r=this.canvas.width=window.innerWidth*e,t=this.canvas.height=window.innerHeight*e;this.view.setViewport([0,0,r,t]);var s=r/t,n=Filament.Camera$Fov,i=s<1?n.HORIZONTAL:n.VERTICAL;this.camera.setProjectionFov(45,s,1,10,i)},e}();Filament.init([u,l],function(){window.app=new f(document.getElementsByTagName("canvas")[0])}),s.createWorker(function(e,r){r(e.x+e.y)},function(e){console.log("We received this response from the worker: "+e)}).postMessage({x:5,y:5})},function(e,r){},function(e,r,t){"use strict";r.__esModule=!0;var s=t(3);r.createWorker=s.createWorker},function(e,r,t){"use strict";r.__esModule=!0,r.createWorker=function(e,r){return void 0===r&&(r=function(e){}),new s(e,r)};var s=function(){function e(e,r){void 0===r&&(r=function(e){});var t=this;this.workerFunction=e,this.onMessage=r;var s=new Blob(["self.onmessage=function(e){"+("("+e+").call(this, e.data, postMessage)")+"}"],{type:"application/javascript"});this._nativeWorker=new Worker(URL.createObjectURL(s)),this._nativeWorker.onmessage=function(e){t.onMessage(e.data)}}return e.prototype.postMessage=function(e,r){this._nativeWorker.postMessage(e,r)},e.prototype.terminate=function(){this._nativeWorker.terminate()},e}()},function(e,r,t){"use strict";r.__esModule=!0,r.processMesh=function(e,r,t,s){var n,i,o,a,c,l,u,p,h,f,m,v=0,d=e.length,g={},y=0;if(void 0!==t){for(n=0;n<t.length;n++)t[n].length&&y++;for(n=0;n<y;n++)g[n]=[]}for(var k=[];v<d;){var b=e[v++],S=2&b,w=8&b,x=16&b,_=32&b,M=64&b,F=128&b;if(1&b){if(p=[e[v],e[v+1],e[v+3]],h=[e[v+1],e[v+2],e[v+3]],v+=4,S&&(l=e[v++],p.materialIndex=l,h.materialIndex=l),o=e.length,w)for(n=0;n<y;n++)for(f=t[n],g[n][o]=[],g[n][o+1]=[],i=0;i<4;i++)m=[f[2*(c=e[v++])],f[2*c+1]],2!==i&&g[n][o].push(m),0!==i&&g[n][o+1].push(m);if(x&&(a=3*e[v++]),_)for(n=0;n<4;n++)a=3*e[v++],s[a++],s[a++],s[a];if(M&&e[v++],F)for(n=0;n<4;n++)e[v++];k.push(p[0]),k.push(p[1]),k.push(p[2]),k.push(h[0]),k.push(h[1]),k.push(h[2])}else{if(u=[e[v++],e[v++],e[v++]],S&&(l=e[v++],u.materialIndex=l),o=e.length,w)for(n=0;n<y;n++)for(f=t[n],g[n][o]=[],i=0;i<3;i++)m=[f[2*(c=e[v++])],f[2*c+1]],g[n][o].push(m);if(x&&(a=3*e[v++]),_)for(n=0;n<3;n++)a=3*e[v++],s[a++],s[a++],s[a];if(M&&e[v++],F)for(n=0;n<3;n++)e[v++];k.push(u[0]),k.push(u[1]),k.push(u[2])}}return k}},function(e,r,t){"use strict";r.__esModule=!0,r.Scrapers1={metadata:{formatVersion:3.1,sourceFile:"skyscrapper.obj",generatedBy:"OBJConverter",vertices:96,faces:176,normals:24,colors:0,uvs:24,materials:1},scale:1,materials:[{colorAmbient:[.588235,.588235,.588235],colorDiffuse:[.588235,.588235,.588235],colorSpecular:[0,0,0],illumination:2,opticalDensity:1.5,specularCoef:9.999999,transparency:0}],vertices:Scrapers1Vertices,morphTargets:[],morphColors:[],normals:Scrapers1Normals,colors:[],uvs:[Scrapers1Uvs],faces:Scrapers1Faces}},function(e,r,t){"use strict";r.__esModule=!0,r.Scrapers2={metadata:{formatVersion:3.1,sourceFile:"skyscrapper2.obj",generatedBy:"OBJConverter",vertices:96,faces:176,normals:24,colors:0,uvs:24,materials:1},scale:1,materials:[{colorAmbient:[.588235,.588235,.588235],colorDiffuse:[.588235,.588235,.588235],colorSpecular:[0,0,0],illumination:2,opticalDensity:1.5,specularCoef:9.999999,transparency:0}],vertices:Scrapers2Vertices,morphTargets:[],morphColors:[],normals:Scrapers2Normals,colors:[],uvs:[Scrapers2Uvs],faces:Scrapers2Faces}},function(e,r,t){"use strict";r.__esModule=!0,r.Track={metadata:{formatVersion:3.1,sourceFile:"track2o.obj",generatedBy:"OBJConverter",vertices:4800,faces:9600,normals:6800,colors:0,uvs:59,materials:1},scale:1,materials:[{colorAmbient:[.588235,.588235,.588235],colorDiffuse:[.588235,.588235,.588235],colorSpecular:[0,0,0],illumination:2,opticalDensity:1.5,specularCoef:9.999999,transparency:0}],vertices:TrackVertices,morphTargets:[],morphColors:[],normals:TrackNormals,colors:[],uvs:[TrackUvs],faces:TrackFaces}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90eXBlZC13ZWItd29ya2Vycy9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3R5cGVkLXdlYi13b3JrZXJzL2xpYi9UeXBlZFdvcmtlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzaGxvYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyYXBlcnMxLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JhcGVyczIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYWNrLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidHlwZWRfd2ViX3dvcmtlcnNfMSIsIm1lc2hsb2FkZXJfMSIsInNjcmFwZXJzMV8xIiwic2NyYXBlcnMyXzEiLCJ0cmFja18xIiwiZW52aXJvbiIsImlibFVybCIsIkZpbGFtZW50IiwiZ2V0U3VwcG9ydGVkRm9ybWF0U3VmZml4Iiwic2t5U21hbGxVcmwiLCJza3lMYXJnZVVybCIsInRyYWNrc01hdGVyaWFsVXJsIiwiQXBwIiwiY2FudmFzIiwiX3RoaXMiLCJ0aGlzIiwiZW5naW5lIiwiRW5naW5lIiwic2NlbmUiLCJjcmVhdGVTY2VuZSIsInNreWJveCIsImNyZWF0ZVNreUZyb21LdHgiLCJzZXRTa3lib3giLCJpbmRpcmVjdExpZ2h0IiwiY3JlYXRlSWJsRnJvbUt0eCIsInNldEludGVuc2l0eSIsInNldEluZGlyZWN0TGlnaHQiLCJzd2FwQ2hhaW4iLCJjcmVhdGVTd2FwQ2hhaW4iLCJyZW5kZXJlciIsImNyZWF0ZVJlbmRlcmVyIiwiY2FtZXJhIiwiY3JlYXRlQ2FtZXJhIiwidmlldyIsImNyZWF0ZVZpZXciLCJzZXRDYW1lcmEiLCJzZXRTY2VuZSIsImZldGNoIiwidHJpYW5nbGVzMCIsInByb2Nlc3NNZXNoIiwiVHJhY2siLCJmYWNlcyIsInZlcnRpY2VzIiwidXZzIiwibm9ybWFscyIsInRyaWFuZ2xlczEiLCJTY3JhcGVyczEiLCJ0cmlhbmdsZXMyIiwiU2NyYXBlcnMyIiwiY29uc29sZSIsImluZm8iLCJsZW5ndGgiLCJNYXRoIiwibWF4IiwiYXBwbHkiLCJkZXN0cm95U2t5Ym94IiwibG9va0F0IiwicmVuZGVyIiwicmVzaXplIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRwciIsImRldmljZVBpeGVsUmF0aW8iLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsInNldFZpZXdwb3J0IiwiYXNwZWN0IiwiRm92IiwiQ2FtZXJhJEZvdiIsImZvdiIsIkhPUklaT05UQUwiLCJWRVJUSUNBTCIsInNldFByb2plY3Rpb25Gb3YiLCJpbml0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImNyZWF0ZVdvcmtlciIsImlucHV0IiwiY2FsbGJhY2siLCJ4IiwieSIsInJlc3VsdCIsImxvZyIsInBvc3RNZXNzYWdlIiwiVHlwZWRXb3JrZXJfMSIsIndvcmtlckZ1bmN0aW9uIiwib25NZXNzYWdlIiwib3V0cHV0IiwiVHlwZWRXb3JrZXIiLCJibG9iIiwiQmxvYiIsInR5cGUiLCJfbmF0aXZlV29ya2VyIiwiV29ya2VyIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwib25tZXNzYWdlIiwibWVzc2FnZUV2ZW50IiwiZGF0YSIsIndvcmtlck1lc3NhZ2UiLCJ0cmFuc2ZlciIsInRlcm1pbmF0ZSIsInZlcnRzIiwiaiIsImZpIiwibm9ybWFsSW5kZXgiLCJ1dkluZGV4IiwibWF0ZXJpYWxJbmRleCIsImZhY2UiLCJmYWNlQSIsImZhY2VCIiwidXZMYXllciIsInV2Iiwib2Zmc2V0Iiwiekxlbmd0aCIsImZhY2VWZXJ0ZXhVdnMiLCJuVXZMYXllcnMiLCJ1bmRlZmluZWQiLCJ0cmlzIiwiaGFzTWF0ZXJpYWwiLCJoYXNGYWNlVmVydGV4VXYiLCJoYXNGYWNlTm9ybWFsIiwiaGFzRmFjZVZlcnRleE5vcm1hbCIsImhhc0ZhY2VDb2xvciIsImhhc0ZhY2VWZXJ0ZXhDb2xvciIsInB1c2giLCJtZXRhZGF0YSIsImZvcm1hdFZlcnNpb24iLCJzb3VyY2VGaWxlIiwiZ2VuZXJhdGVkQnkiLCJjb2xvcnMiLCJtYXRlcmlhbHMiLCJzY2FsZSIsImNvbG9yQW1iaWVudCIsImNvbG9yRGlmZnVzZSIsImNvbG9yU3BlY3VsYXIiLCJpbGx1bWluYXRpb24iLCJvcHRpY2FsRGVuc2l0eSIsInNwZWN1bGFyQ29lZiIsInRyYW5zcGFyZW5jeSIsIlNjcmFwZXJzMVZlcnRpY2VzIiwibW9ycGhUYXJnZXRzIiwibW9ycGhDb2xvcnMiLCJTY3JhcGVyczFOb3JtYWxzIiwiU2NyYXBlcnMxVXZzIiwiU2NyYXBlcnMxRmFjZXMiLCJTY3JhcGVyczJWZXJ0aWNlcyIsIlNjcmFwZXJzMk5vcm1hbHMiLCJTY3JhcGVyczJVdnMiLCJTY3JhcGVyczJGYWNlcyIsIlRyYWNrVmVydGljZXMiLCJUcmFja05vcm1hbHMiLCJUcmFja1V2cyIsIlRyYWNrRmFjZXMiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcs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a0JBQ1pDLGdCQUNBQyxlQUNBckcsUUFBV3NHLGlCQUNYYixVQUNBMUYsS0FBUXdHLGNBQ1IxRyxNQUFTMkcsOERDNUJBdEwsRUFBQWtGLFdBQ1RpRixVQUNJQyxjQUFrQixJQUNsQkMsV0FBa0IsbUJBQ2xCQyxZQUFrQixlQUNsQjFGLFNBQWtCLEdBQ2xCRCxNQUFrQixJQUNsQkcsUUFBa0IsR0FDbEJ5RixPQUFrQixFQUNsQjFGLElBQWtCLEdBQ2xCMkYsVUFBa0IsR0FFdEJDLE1BQVUsRUFDVkQsWUFDSUUsY0FBa0IsUUFBVSxRQUFVLFNBQ3RDQyxjQUFrQixRQUFVLFFBQVUsU0FDdENDLGVBQW1CLEVBQUssRUFBSyxHQUM3QkMsYUFBaUIsRUFDakJDLGVBQW1CLElBQ25CQyxhQUFpQixTQUNqQkMsYUFBaUIsSUFFckJwRyxTQUFZMkcsa0JBQ1pMLGdCQUNBQyxlQUNBckcsUUFBVzBHLGlCQUNYakIsVUFDQTFGLEtBQVE0RyxjQUNSOUcsTUFBUytHLDhEQzVCQTFMLEVBQUEwRSxPQUNUeUYsVUFDSUMsY0FBa0IsSUFDbEJDLFdBQWtCLGNBQ2xCQyxZQUFrQixlQUNsQjFGLFNBQWtCLEtBQ2xCRCxNQUFrQixLQUNsQkcsUUFBa0IsS0FDbEJ5RixPQUFrQixFQUNsQjFGLElBQWtCLEdBQ2xCMkYsVUFBa0IsR0FFdEJDLE1BQVUsRUFDVkQsWUFDSUUsY0FBa0IsUUFBVSxRQUFVLFNBQ3RDQyxjQUFrQixRQUFVLFFBQVUsU0FDdENDLGVBQW1CLEVBQUssRUFBSyxHQUM3QkMsYUFBaUIsRUFDakJDLGVBQW1CLElBQ25CQyxhQUFpQixTQUNqQkMsYUFBaUIsSUFFckJwRyxTQUFZK0csY0FDWlQsZ0JBQ0FDLGVBQ0FyRyxRQUFXOEcsYUFDWHJCLFVBQ0ExRixLQUFRZ0gsVUFDUmxILE1BQVNtSCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFwiLi9maWxhbWVudFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVXb3JrZXIsIElUeXBlZFdvcmtlciB9IGZyb20gXCJ0eXBlZC13ZWItd29ya2Vyc1wiO1xuaW1wb3J0IHsgcHJvY2Vzc01lc2ggfSBmcm9tIFwiLi9tZXNobG9hZGVyXCI7XG5pbXBvcnQgeyBTY3JhcGVyczEgfSBmcm9tIFwiLi9zY3JhcGVyczFcIjtcbmltcG9ydCB7IFNjcmFwZXJzMiB9IGZyb20gXCIuL3NjcmFwZXJzMlwiO1xuaW1wb3J0IHsgVHJhY2sgfSBmcm9tIFwiLi90cmFja1wiO1xuXG5jb25zdCBpYmxTdWZmaXggPSBGaWxhbWVudC5nZXRTdXBwb3J0ZWRGb3JtYXRTdWZmaXgoXCJldGMgczN0Y1wiKTtcbmNvbnN0IGVudmlyb24gPSBcImVudi9zeWZlcmZvbnRlaW5fMThkX2NsZWFyXzJrXCI7XG5jb25zdCBpYmxVcmwgPSBgJHtlbnZpcm9ufV9pYmwke2libFN1ZmZpeH0ua3R4LmJtcGA7XG5jb25zdCBza3lTbWFsbFVybCA9IGAke2Vudmlyb259X3NreWJveF90aW55Lmt0eC5ibXBgO1xuY29uc3Qgc2t5TGFyZ2VVcmwgPSBgJHtlbnZpcm9ufV9za3lib3gua3R4LmJtcGA7XG5jb25zdCB0cmFja3NNYXRlcmlhbFVybCA9IFwibWF0ZXJpYWxzL3RyYWNrcy5maWxhbWF0XCI7XG5cbmNsYXNzIEFwcCB7XG4gICAgcHVibGljIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgcHVibGljIGVuZ2luZTogRmlsYW1lbnQuRW5naW5lO1xuICAgIHB1YmxpYyBzY2VuZTogRmlsYW1lbnQuU2NlbmU7XG4gICAgcHVibGljIHNreWJveDogRmlsYW1lbnQuU2t5Ym94O1xuICAgIHB1YmxpYyBpbmRpcmVjdExpZ2h0OiBGaWxhbWVudC5JbmRpcmVjdExpZ2h0O1xuICAgIHB1YmxpYyBzd2FwQ2hhaW46IEZpbGFtZW50LlN3YXBDaGFpbjtcbiAgICBwdWJsaWMgcmVuZGVyZXI6IEZpbGFtZW50LlJlbmRlcmVyO1xuICAgIHB1YmxpYyBjYW1lcmE6IEZpbGFtZW50LkNhbWVyYTtcbiAgICBwdWJsaWMgdmlldzogRmlsYW1lbnQuVmlldztcblxuICAgIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBGaWxhbWVudC5FbmdpbmUuY3JlYXRlKGNhbnZhcyk7XG4gICAgICAgIHRoaXMuc2NlbmUgPSB0aGlzLmVuZ2luZS5jcmVhdGVTY2VuZSgpO1xuICAgICAgICB0aGlzLnNreWJveCA9IHRoaXMuZW5naW5lLmNyZWF0ZVNreUZyb21LdHgoc2t5U21hbGxVcmwpO1xuICAgICAgICB0aGlzLnNjZW5lLnNldFNreWJveCh0aGlzLnNreWJveCk7XG4gICAgICAgIHRoaXMuaW5kaXJlY3RMaWdodCA9IHRoaXMuZW5naW5lLmNyZWF0ZUlibEZyb21LdHgoaWJsVXJsKTtcbiAgICAgICAgdGhpcy5pbmRpcmVjdExpZ2h0LnNldEludGVuc2l0eSgxMDAwMDApO1xuICAgICAgICB0aGlzLnNjZW5lLnNldEluZGlyZWN0TGlnaHQodGhpcy5pbmRpcmVjdExpZ2h0KTtcbiAgICAgICAgdGhpcy5zd2FwQ2hhaW4gPSB0aGlzLmVuZ2luZS5jcmVhdGVTd2FwQ2hhaW4oKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHRoaXMuZW5naW5lLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5lbmdpbmUuY3JlYXRlQ2FtZXJhKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuZW5naW5lLmNyZWF0ZVZpZXcoKTtcbiAgICAgICAgdGhpcy52aWV3LnNldENhbWVyYSh0aGlzLmNhbWVyYSk7XG4gICAgICAgIHRoaXMudmlldy5zZXRTY2VuZSh0aGlzLnNjZW5lKTtcblxuICAgICAgICBGaWxhbWVudC5mZXRjaChbc2t5TGFyZ2VVcmwsIHRyYWNrc01hdGVyaWFsVXJsXSwgKCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCB0cmlhbmdsZXMwID0gcHJvY2Vzc01lc2goVHJhY2suZmFjZXMsIFRyYWNrLnZlcnRpY2VzLCBUcmFjay51dnMsIFRyYWNrLm5vcm1hbHMpO1xuICAgICAgICAgICAgY29uc3QgdHJpYW5nbGVzMSA9IHByb2Nlc3NNZXNoKFNjcmFwZXJzMS5mYWNlcywgU2NyYXBlcnMxLnZlcnRpY2VzLCBTY3JhcGVyczEudXZzLCBTY3JhcGVyczEubm9ybWFscyk7XG4gICAgICAgICAgICBjb25zdCB0cmlhbmdsZXMyID0gcHJvY2Vzc01lc2goU2NyYXBlcnMyLmZhY2VzLCBTY3JhcGVyczIudmVydGljZXMsIFNjcmFwZXJzMi51dnMsIFNjcmFwZXJzMi5ub3JtYWxzKTtcblxuICAgICAgICAgICAgY29uc29sZS5pbmZvKFRyYWNrLnZlcnRpY2VzLmxlbmd0aCAvIDMsIHRyaWFuZ2xlczAubGVuZ3RoIC8gMywgTWF0aC5tYXguYXBwbHkobnVsbCwgdHJpYW5nbGVzMCkpO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKFNjcmFwZXJzMS52ZXJ0aWNlcy5sZW5ndGggLyAzLCB0cmlhbmdsZXMxLmxlbmd0aCAvIDMsIE1hdGgubWF4LmFwcGx5KG51bGwsIHRyaWFuZ2xlczEpKTtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhTY3JhcGVyczIudmVydGljZXMubGVuZ3RoIC8gMywgdHJpYW5nbGVzMi5sZW5ndGggLyAzLCBNYXRoLm1heC5hcHBseShudWxsLCB0cmlhbmdsZXMyKSk7XG5cbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmRlc3Ryb3lTa3lib3godGhpcy5za3lib3gpO1xuICAgICAgICAgICAgdGhpcy5za3lib3ggPSB0aGlzLmVuZ2luZS5jcmVhdGVTa3lGcm9tS3R4KHNreUxhcmdlVXJsKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc2V0U2t5Ym94KHRoaXMuc2t5Ym94KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZXllID0gWzAsIDAsIDRdO1xuICAgICAgICBjb25zdCBjZW50ZXIgPSBbMCwgMCwgMF07XG4gICAgICAgIGNvbnN0IHVwID0gWzAsIDEsIDBdO1xuICAgICAgICB0aGlzLmNhbWVyYS5sb29rQXQoZXllLCBjZW50ZXIsIHVwKTtcblxuICAgICAgICB0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVzaXplID0gdGhpcy5yZXNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemUpO1xuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnN3YXBDaGFpbiwgdGhpcy52aWV3KTtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcik7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc2l6ZSgpIHtcbiAgICAgICAgY29uc3QgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCAqIGRwcjtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogZHByO1xuICAgICAgICB0aGlzLnZpZXcuc2V0Vmlld3BvcnQoWzAsIDAsIHdpZHRoLCBoZWlnaHRdKTtcblxuICAgICAgICBjb25zdCBhc3BlY3QgPSB3aWR0aCAvIGhlaWdodDtcbiAgICAgICAgY29uc3QgRm92ID0gRmlsYW1lbnQuQ2FtZXJhJEZvdjtcbiAgICAgICAgY29uc3QgZm92ID0gYXNwZWN0IDwgMSA/IEZvdi5IT1JJWk9OVEFMIDogRm92LlZFUlRJQ0FMO1xuICAgICAgICB0aGlzLmNhbWVyYS5zZXRQcm9qZWN0aW9uRm92KDQ1LCBhc3BlY3QsIDEuMCwgMTAuMCwgZm92KTtcbiAgICB9XG59XG5cbkZpbGFtZW50LmluaXQoW3NreVNtYWxsVXJsLCBpYmxVcmxdLCAoKSA9PiB7XG4gICAgd2luZG93W1wiYXBwXCJdID0gbmV3IEFwcChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNhbnZhc1wiKVswXSk7XG59KTtcblxuaW50ZXJmYWNlIFZhbHVlcyB7XG4gICAgeDogbnVtYmVyO1xuICAgIHk6IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gd29ya0ZuKGlucHV0OiBWYWx1ZXMsIGNhbGxiYWNrOiAoXzogbnVtYmVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY2FsbGJhY2soaW5wdXQueCArIGlucHV0LnkpO1xufVxuXG5mdW5jdGlvbiBsb2dGbihyZXN1bHQ6IG51bWJlcikge1xuICAgIGNvbnNvbGUubG9nKGBXZSByZWNlaXZlZCB0aGlzIHJlc3BvbnNlIGZyb20gdGhlIHdvcmtlcjogJHtyZXN1bHR9YCk7XG59XG5cbmNvbnN0IHR5cGVkV29ya2VyOiBJVHlwZWRXb3JrZXI8VmFsdWVzLCBudW1iZXI+ID0gY3JlYXRlV29ya2VyKHdvcmtGbiwgbG9nRm4pO1xuXG50eXBlZFdvcmtlci5wb3N0TWVzc2FnZSh7IHg6IDUsIHk6IDUgfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcclxudmFyIFR5cGVkV29ya2VyXzEgPSByZXF1aXJlKFwiLi9UeXBlZFdvcmtlclwiKTtcclxuZXhwb3J0cy5jcmVhdGVXb3JrZXIgPSBUeXBlZFdvcmtlcl8xLmNyZWF0ZVdvcmtlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XHJcbmZ1bmN0aW9uIGNyZWF0ZVdvcmtlcih3b3JrZXJGdW5jdGlvbiwgb25NZXNzYWdlKSB7XHJcbiAgICBpZiAob25NZXNzYWdlID09PSB2b2lkIDApIHsgb25NZXNzYWdlID0gZnVuY3Rpb24gKG91dHB1dCkgeyB9OyB9XHJcbiAgICByZXR1cm4gbmV3IFR5cGVkV29ya2VyKHdvcmtlckZ1bmN0aW9uLCBvbk1lc3NhZ2UpO1xyXG59XHJcbmV4cG9ydHMuY3JlYXRlV29ya2VyID0gY3JlYXRlV29ya2VyO1xyXG52YXIgVHlwZWRXb3JrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUeXBlZFdvcmtlcih3b3JrZXJGdW5jdGlvbiwgb25NZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKG9uTWVzc2FnZSA9PT0gdm9pZCAwKSB7IG9uTWVzc2FnZSA9IGZ1bmN0aW9uIChvdXRwdXQpIHsgfTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy53b3JrZXJGdW5jdGlvbiA9IHdvcmtlckZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMub25NZXNzYWdlID0gb25NZXNzYWdlO1xyXG4gICAgICAgIHZhciBwb3N0TWVzc2FnZSA9IFwiKFwiICsgd29ya2VyRnVuY3Rpb24gKyBcIikuY2FsbCh0aGlzLCBlLmRhdGEsIHBvc3RNZXNzYWdlKVwiO1xyXG4gICAgICAgIHZhciB3b3JrZXJGaWxlID0gXCJzZWxmLm9ubWVzc2FnZT1mdW5jdGlvbihlKXtcIiArIHBvc3RNZXNzYWdlICsgXCJ9XCI7XHJcbiAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbd29ya2VyRmlsZV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnIH0pO1xyXG4gICAgICAgIHRoaXMuX25hdGl2ZVdvcmtlciA9IG5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSk7XHJcbiAgICAgICAgdGhpcy5fbmF0aXZlV29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlRXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMub25NZXNzYWdlKG1lc3NhZ2VFdmVudC5kYXRhKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQb3N0IG1lc3NhZ2UgdG8gd29ya2VyIGZvciBwcm9jZXNzaW5nXHJcbiAgICAgKiBAcGFyYW0gd29ya2VyTWVzc2FnZSBtZXNzYWdlIHRvIHNlbmQgdG8gd29ya2VyXHJcbiAgICAgKi9cclxuICAgIFR5cGVkV29ya2VyLnByb3RvdHlwZS5wb3N0TWVzc2FnZSA9IGZ1bmN0aW9uICh3b3JrZXJNZXNzYWdlLCB0cmFuc2Zlcikge1xyXG4gICAgICAgIHRoaXMuX25hdGl2ZVdvcmtlci5wb3N0TWVzc2FnZSh3b3JrZXJNZXNzYWdlLCB0cmFuc2Zlcik7XHJcbiAgICB9O1xyXG4gICAgVHlwZWRXb3JrZXIucHJvdG90eXBlLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9uYXRpdmVXb3JrZXIudGVybWluYXRlKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFR5cGVkV29ya2VyO1xyXG59KCkpO1xyXG4iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2Jsb2IvZGV2L3NyYy9sb2FkZXJzL0pTT05Mb2FkZXIuanMjTDE2OVxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NNZXNoKGZhY2VzLCB2ZXJ0cywgdXZzLCBub3JtYWxzKSB7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgY29uc3Qgekxlbmd0aCA9IGZhY2VzLmxlbmd0aDtcblxuICAgIGxldCBpLCBqLCBmaSxcbiAgICBjb2xvckluZGV4LCBub3JtYWxJbmRleCwgdXZJbmRleCwgbWF0ZXJpYWxJbmRleCxcbiAgICBmYWNlLCBmYWNlQSwgZmFjZUIsIGhleCwgbm9ybWFsLFxuICAgIHV2TGF5ZXIsIHV2LCB1LCB2O1xuICAgIGNvbnN0IGZhY2VWZXJ0ZXhVdnMgPSB7fSwgY29sb3JzID0ge307XG5cbiAgICBsZXQgblV2TGF5ZXJzID0gMDtcblxuICAgIGlmICh1dnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdXZzLmxlbmd0aDsgaSArKykge1xuICAgICAgICAgICAgaWYgKHV2c1sgaSBdLmxlbmd0aCkgeyBuVXZMYXllcnMgKys7IH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgblV2TGF5ZXJzOyBpICsrKSB7XG4gICAgICAgICAgICBmYWNlVmVydGV4VXZzW2ldID0gW107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0cmlzID0gW107XG5cbiAgICB3aGlsZSAob2Zmc2V0IDwgekxlbmd0aCkge1xuICAgICAgICBjb25zdCB0eXBlID0gZmFjZXNbIG9mZnNldCArKyBdO1xuICAgICAgICBjb25zdCBpc1F1YWQgPSB0eXBlICYgMTtcbiAgICAgICAgY29uc3QgaGFzTWF0ZXJpYWwgPSB0eXBlICYgMjtcbiAgICAgICAgY29uc3QgaGFzRmFjZVZlcnRleFV2ID0gdHlwZSAmIDg7XG4gICAgICAgIGNvbnN0IGhhc0ZhY2VOb3JtYWwgPSB0eXBlICYgMTY7XG4gICAgICAgIGNvbnN0IGhhc0ZhY2VWZXJ0ZXhOb3JtYWwgPSB0eXBlICYgMzI7XG4gICAgICAgIGNvbnN0IGhhc0ZhY2VDb2xvciA9IHR5cGUgJiA2NDtcbiAgICAgICAgY29uc3QgaGFzRmFjZVZlcnRleENvbG9yID0gdHlwZSAmIDEyODtcblxuICAgICAgICBpZiAoaXNRdWFkKSB7XG4gICAgICAgICAgICBmYWNlQSA9IFtcbiAgICAgICAgICAgICAgICBmYWNlc1sgb2Zmc2V0IF0sXG4gICAgICAgICAgICAgICAgZmFjZXNbIG9mZnNldCArIDEgXSxcbiAgICAgICAgICAgICAgICBmYWNlc1sgb2Zmc2V0ICsgMyBdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGZhY2VCID0gW1xuICAgICAgICAgICAgICAgIGZhY2VzWyBvZmZzZXQgKyAxIF0sXG4gICAgICAgICAgICAgICAgZmFjZXNbIG9mZnNldCArIDIgXSxcbiAgICAgICAgICAgICAgICBmYWNlc1sgb2Zmc2V0ICsgMyBdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgICAgaWYgKGhhc01hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleCA9IGZhY2VzWyBvZmZzZXQgKysgXTtcbiAgICAgICAgICAgICAgICBmYWNlQS5tYXRlcmlhbEluZGV4ID0gbWF0ZXJpYWxJbmRleDtcbiAgICAgICAgICAgICAgICBmYWNlQi5tYXRlcmlhbEluZGV4ID0gbWF0ZXJpYWxJbmRleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdG8gZ2V0IGZhY2UgPD0+IHV2IGluZGV4IGNvcnJlc3BvbmRlbmNlXG5cbiAgICAgICAgICAgIGZpID0gZmFjZXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGhhc0ZhY2VWZXJ0ZXhVdikge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBuVXZMYXllcnM7IGkgKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdXZMYXllciA9IHV2c1sgaSBdO1xuICAgICAgICAgICAgICAgICAgICBmYWNlVmVydGV4VXZzWyBpIF1bIGZpIF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZmFjZVZlcnRleFV2c1sgaSBdWyBmaSArIDEgXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgNDsgaiArKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXZJbmRleCA9IGZhY2VzWyBvZmZzZXQgKysgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB1dkxheWVyWyB1dkluZGV4ICogMiBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHV2TGF5ZXJbIHV2SW5kZXggKiAyICsgMSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXYgPSBbdSwgdl07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaiAhPT0gMikgeyBmYWNlVmVydGV4VXZzWyBpIF1bIGZpIF0ucHVzaCh1dik7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqICE9PSAwKSB7IGZhY2VWZXJ0ZXhVdnNbIGkgXVsgZmkgKyAxIF0ucHVzaCh1dik7IH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc0ZhY2VOb3JtYWwpIHtcbiAgICAgICAgICAgICAgICBub3JtYWxJbmRleCA9IGZhY2VzWyBvZmZzZXQgKysgXSAqIDM7XG4gICAgICAgICAgICAgICAgLy8gZmFjZUEubm9ybWFsLnNldChub3JtYWxzWyBub3JtYWxJbmRleCArKyBdLCBub3JtYWxzWyBub3JtYWxJbmRleCArKyBdLCBub3JtYWxzWyBub3JtYWxJbmRleCBdKTsgLy8gcHJpZGVvdXRcbiAgICAgICAgICAgICAgICAvLyBmYWNlQi5ub3JtYWwuY29weShmYWNlQS5ub3JtYWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzRmFjZVZlcnRleE5vcm1hbCkge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCA0OyBpICsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbEluZGV4ID0gZmFjZXNbIG9mZnNldCArKyBdICogMztcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsc1sgbm9ybWFsSW5kZXggKysgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbHNbIG5vcm1hbEluZGV4ICsrIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxzWyBub3JtYWxJbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoaSAhPT0gMikgeyBmYWNlQS52ZXJ0ZXhOb3JtYWxzLnB1c2gobm9ybWFsKTsgfVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoaSAhPT0gMCkgeyBmYWNlQi52ZXJ0ZXhOb3JtYWxzLnB1c2gobm9ybWFsKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc0ZhY2VDb2xvcikge1xuICAgICAgICAgICAgICAgIGNvbG9ySW5kZXggPSBmYWNlc1sgb2Zmc2V0ICsrIF07XG4gICAgICAgICAgICAgICAgaGV4ID0gY29sb3JzWyBjb2xvckluZGV4IF07XG4gICAgICAgICAgICAgICAgLy8gZmFjZUEuY29sb3Iuc2V0SGV4KGhleCk7XG4gICAgICAgICAgICAgICAgLy8gZmFjZUIuY29sb3Iuc2V0SGV4KGhleCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNGYWNlVmVydGV4Q29sb3IpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNDsgaSArKykge1xuICAgICAgICAgICAgICAgICAgICBjb2xvckluZGV4ID0gZmFjZXNbIG9mZnNldCArKyBdO1xuICAgICAgICAgICAgICAgICAgICBoZXggPSBjb2xvcnNbIGNvbG9ySW5kZXggXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGkgIT09IDIpIHsgZmFjZUEudmVydGV4Q29sb3JzLnB1c2goaGV4KTsgfVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoaSAhPT0gMCkgeyBmYWNlQi52ZXJ0ZXhDb2xvcnMucHVzaChoZXgpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cmlzLnB1c2goZmFjZUFbMF0pO1xuICAgICAgICAgICAgdHJpcy5wdXNoKGZhY2VBWzFdKTtcbiAgICAgICAgICAgIHRyaXMucHVzaChmYWNlQVsyXSk7XG4gICAgICAgICAgICB0cmlzLnB1c2goZmFjZUJbMF0pO1xuICAgICAgICAgICAgdHJpcy5wdXNoKGZhY2VCWzFdKTtcbiAgICAgICAgICAgIHRyaXMucHVzaChmYWNlQlsyXSk7XG5cbiAgICAgICAgfSBlbHNlIHsgLy8gISBpc1F1YWRcblxuICAgICAgICAgICAgZmFjZSA9IFtcbiAgICAgICAgICAgICAgICBmYWNlc1sgb2Zmc2V0ICsrIF0sXG4gICAgICAgICAgICAgICAgZmFjZXNbIG9mZnNldCArKyBdLFxuICAgICAgICAgICAgICAgIGZhY2VzWyBvZmZzZXQgKysgXSxcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGlmIChoYXNNYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kZXggPSBmYWNlc1sgb2Zmc2V0ICsrIF07XG4gICAgICAgICAgICAgICAgZmFjZS5tYXRlcmlhbEluZGV4ID0gbWF0ZXJpYWxJbmRleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdG8gZ2V0IGZhY2UgPD0+IHV2IGluZGV4IGNvcnJlc3BvbmRlbmNlXG5cbiAgICAgICAgICAgIGZpID0gZmFjZXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGhhc0ZhY2VWZXJ0ZXhVdikge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBuVXZMYXllcnM7IGkgKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdXZMYXllciA9IHV2c1sgaSBdO1xuICAgICAgICAgICAgICAgICAgICBmYWNlVmVydGV4VXZzWyBpIF1bIGZpIF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGogKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2SW5kZXggPSBmYWNlc1sgb2Zmc2V0ICsrIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB1ID0gdXZMYXllclsgdXZJbmRleCAqIDIgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB1dkxheWVyWyB1dkluZGV4ICogMiArIDEgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2ID0gW3UsIHZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZVZlcnRleFV2c1sgaSBdWyBmaSBdLnB1c2godXYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzRmFjZU5vcm1hbCkge1xuICAgICAgICAgICAgICAgIG5vcm1hbEluZGV4ID0gZmFjZXNbIG9mZnNldCArKyBdICogMztcbiAgICAgICAgICAgICAgICAvLyBmYWNlLm5vcm1hbC5zZXQobm9ybWFsc1sgbm9ybWFsSW5kZXggKysgXSwgbm9ybWFsc1sgbm9ybWFsSW5kZXggKysgXSwgbm9ybWFsc1sgbm9ybWFsSW5kZXggXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNGYWNlVmVydGV4Tm9ybWFsKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkgKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsSW5kZXggPSBmYWNlc1tvZmZzZXQrK10gKiAzO1xuICAgICAgICAgICAgICAgICAgICBub3JtYWwgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxzWyBub3JtYWxJbmRleCArKyBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsc1sgbm9ybWFsSW5kZXggKysgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbHNbIG5vcm1hbEluZGV4IF0sXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIC8vIGZhY2UudmVydGV4Tm9ybWFscy5wdXNoKG5vcm1hbCk7IC8vIHByaWRlb3V0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzRmFjZUNvbG9yKSB7XG4gICAgICAgICAgICAgICAgY29sb3JJbmRleCA9IGZhY2VzWyBvZmZzZXQgKysgXTtcbiAgICAgICAgICAgICAgICAvLyBmYWNlLmNvbG9yLnNldEhleChjb2xvcnNbIGNvbG9ySW5kZXggXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNGYWNlVmVydGV4Q29sb3IpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSArKykge1xuICAgICAgICAgICAgICAgICAgICBjb2xvckluZGV4ID0gZmFjZXNbIG9mZnNldCArKyBdO1xuICAgICAgICAgICAgICAgICAgICAvLyBmYWNlLnZlcnRleENvbG9ycy5wdXNoKGNvbG9yc1sgY29sb3JJbmRleCBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyaXMucHVzaChmYWNlWzBdKTtcbiAgICAgICAgICAgIHRyaXMucHVzaChmYWNlWzFdKTtcbiAgICAgICAgICAgIHRyaXMucHVzaChmYWNlWzJdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJpcztcbn1cbiIsImludGVyZmFjZSBHZW9tZXRyeSB7XG4gICAgbWV0YWRhdGE6IGFueTtcbiAgICBzY2FsZTogbnVtYmVyO1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZGVjbGFyZSBjb25zdCBTY3JhcGVyczFWZXJ0aWNlczogQXJyYXk8bnVtYmVyPjtcbmRlY2xhcmUgY29uc3QgU2NyYXBlcnMxTm9ybWFsczogQXJyYXk8bnVtYmVyPjtcbmRlY2xhcmUgY29uc3QgU2NyYXBlcnMxVXZzOiBBcnJheTxudW1iZXI+O1xuZGVjbGFyZSBjb25zdCBTY3JhcGVyczFGYWNlczogQXJyYXk8bnVtYmVyPjtcblxuZXhwb3J0IGNvbnN0IFNjcmFwZXJzMSA9IHtcbiAgICBcIm1ldGFkYXRhXCIgOiB7XG4gICAgICAgIFwiZm9ybWF0VmVyc2lvblwiIDogMy4xLFxuICAgICAgICBcInNvdXJjZUZpbGVcIiAgICA6IFwic2t5c2NyYXBwZXIub2JqXCIsXG4gICAgICAgIFwiZ2VuZXJhdGVkQnlcIiAgIDogXCJPQkpDb252ZXJ0ZXJcIixcbiAgICAgICAgXCJ2ZXJ0aWNlc1wiICAgICAgOiA5NixcbiAgICAgICAgXCJmYWNlc1wiICAgICAgICAgOiAxNzYsXG4gICAgICAgIFwibm9ybWFsc1wiICAgICAgIDogMjQsXG4gICAgICAgIFwiY29sb3JzXCIgICAgICAgIDogMCxcbiAgICAgICAgXCJ1dnNcIiAgICAgICAgICAgOiAyNCxcbiAgICAgICAgXCJtYXRlcmlhbHNcIiAgICAgOiAxXG4gICAgfSxcbiAgICBcInNjYWxlXCIgOiAxLjAwMDAwMCxcbiAgICBcIm1hdGVyaWFsc1wiOiBbXHR7XG4gICAgICAgIFwiY29sb3JBbWJpZW50XCIgOiBbMC41ODgyMzUsIDAuNTg4MjM1LCAwLjU4ODIzNV0sXG4gICAgICAgIFwiY29sb3JEaWZmdXNlXCIgOiBbMC41ODgyMzUsIDAuNTg4MjM1LCAwLjU4ODIzNV0sXG4gICAgICAgIFwiY29sb3JTcGVjdWxhclwiIDogWzAuMCwgMC4wLCAwLjBdLFxuICAgICAgICBcImlsbHVtaW5hdGlvblwiIDogMixcbiAgICAgICAgXCJvcHRpY2FsRGVuc2l0eVwiIDogMS41LFxuICAgICAgICBcInNwZWN1bGFyQ29lZlwiIDogOS45OTk5OTksXG4gICAgICAgIFwidHJhbnNwYXJlbmN5XCIgOiAwLjBcblx0fV0sXG4gICAgXCJ2ZXJ0aWNlc1wiOiBTY3JhcGVyczFWZXJ0aWNlcyxcbiAgICBcIm1vcnBoVGFyZ2V0c1wiOiBbXSxcbiAgICBcIm1vcnBoQ29sb3JzXCI6IFtdLFxuICAgIFwibm9ybWFsc1wiOiBTY3JhcGVyczFOb3JtYWxzLFxuICAgIFwiY29sb3JzXCI6IFtdLFxuICAgIFwidXZzXCI6IFtTY3JhcGVyczFVdnNdLFxuICAgIFwiZmFjZXNcIjogU2NyYXBlcnMxRmFjZXNcbn1cbiIsImludGVyZmFjZSBHZW9tZXRyeSB7XG4gICAgbWV0YWRhdGE6IGFueTtcbiAgICBzY2FsZTogbnVtYmVyO1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZGVjbGFyZSBjb25zdCBTY3JhcGVyczJWZXJ0aWNlczogQXJyYXk8bnVtYmVyPjtcbmRlY2xhcmUgY29uc3QgU2NyYXBlcnMyTm9ybWFsczogQXJyYXk8bnVtYmVyPjtcbmRlY2xhcmUgY29uc3QgU2NyYXBlcnMyVXZzOiBBcnJheTxudW1iZXI+O1xuZGVjbGFyZSBjb25zdCBTY3JhcGVyczJGYWNlczogQXJyYXk8bnVtYmVyPjtcblxuZXhwb3J0IGNvbnN0IFNjcmFwZXJzMiA9IHtcbiAgICBcIm1ldGFkYXRhXCIgOiB7XG4gICAgICAgIFwiZm9ybWF0VmVyc2lvblwiIDogMy4xLFxuICAgICAgICBcInNvdXJjZUZpbGVcIiAgICA6IFwic2t5c2NyYXBwZXIyLm9ialwiLFxuICAgICAgICBcImdlbmVyYXRlZEJ5XCIgICA6IFwiT0JKQ29udmVydGVyXCIsXG4gICAgICAgIFwidmVydGljZXNcIiAgICAgIDogOTYsXG4gICAgICAgIFwiZmFjZXNcIiAgICAgICAgIDogMTc2LFxuICAgICAgICBcIm5vcm1hbHNcIiAgICAgICA6IDI0LFxuICAgICAgICBcImNvbG9yc1wiICAgICAgICA6IDAsXG4gICAgICAgIFwidXZzXCIgICAgICAgICAgIDogMjQsXG4gICAgICAgIFwibWF0ZXJpYWxzXCIgICAgIDogMVxuICAgIH0sXG4gICAgXCJzY2FsZVwiIDogMS4wMDAwMDAsXG4gICAgXCJtYXRlcmlhbHNcIjogW1x0e1xuICAgICAgICBcImNvbG9yQW1iaWVudFwiIDogWzAuNTg4MjM1LCAwLjU4ODIzNSwgMC41ODgyMzVdLFxuICAgICAgICBcImNvbG9yRGlmZnVzZVwiIDogWzAuNTg4MjM1LCAwLjU4ODIzNSwgMC41ODgyMzVdLFxuICAgICAgICBcImNvbG9yU3BlY3VsYXJcIiA6IFswLjAsIDAuMCwgMC4wXSxcbiAgICAgICAgXCJpbGx1bWluYXRpb25cIiA6IDIsXG4gICAgICAgIFwib3B0aWNhbERlbnNpdHlcIiA6IDEuNSxcbiAgICAgICAgXCJzcGVjdWxhckNvZWZcIiA6IDkuOTk5OTk5LFxuICAgICAgICBcInRyYW5zcGFyZW5jeVwiIDogMC4wXG5cdH1dLFxuICAgIFwidmVydGljZXNcIjogU2NyYXBlcnMyVmVydGljZXMsXG4gICAgXCJtb3JwaFRhcmdldHNcIjogW10sXG4gICAgXCJtb3JwaENvbG9yc1wiOiBbXSxcbiAgICBcIm5vcm1hbHNcIjogU2NyYXBlcnMyTm9ybWFscyxcbiAgICBcImNvbG9yc1wiOiBbXSxcbiAgICBcInV2c1wiOiBbU2NyYXBlcnMyVXZzXSxcbiAgICBcImZhY2VzXCI6IFNjcmFwZXJzMkZhY2VzXG59XG4iLCJpbnRlcmZhY2UgR2VvbWV0cnkge1xuICAgIG1ldGFkYXRhOiBhbnk7XG4gICAgc2NhbGU6IG51bWJlcjtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbmRlY2xhcmUgY29uc3QgVHJhY2tWZXJ0aWNlczogQXJyYXk8bnVtYmVyPjtcbmRlY2xhcmUgY29uc3QgVHJhY2tOb3JtYWxzOiBBcnJheTxudW1iZXI+O1xuZGVjbGFyZSBjb25zdCBUcmFja1V2czogQXJyYXk8bnVtYmVyPjtcbmRlY2xhcmUgY29uc3QgVHJhY2tGYWNlczogQXJyYXk8bnVtYmVyPjtcblxuZXhwb3J0IGNvbnN0IFRyYWNrID0ge1xuICAgIFwibWV0YWRhdGFcIjoge1xuICAgICAgICBcImZvcm1hdFZlcnNpb25cIiA6IDMuMSxcbiAgICAgICAgXCJzb3VyY2VGaWxlXCIgICAgOiBcInRyYWNrMm8ub2JqXCIsXG4gICAgICAgIFwiZ2VuZXJhdGVkQnlcIiAgIDogXCJPQkpDb252ZXJ0ZXJcIixcbiAgICAgICAgXCJ2ZXJ0aWNlc1wiICAgICAgOiA0ODAwLFxuICAgICAgICBcImZhY2VzXCIgICAgICAgICA6IDk2MDAsXG4gICAgICAgIFwibm9ybWFsc1wiICAgICAgIDogNjgwMCxcbiAgICAgICAgXCJjb2xvcnNcIiAgICAgICAgOiAwLFxuICAgICAgICBcInV2c1wiICAgICAgICAgICA6IDU5LFxuICAgICAgICBcIm1hdGVyaWFsc1wiICAgICA6IDFcbiAgICB9LFxuICAgIFwic2NhbGVcIiA6IDEuMDAwMDAwLFxuICAgIFwibWF0ZXJpYWxzXCI6IFtcdHtcbiAgICAgICAgXCJjb2xvckFtYmllbnRcIiA6IFswLjU4ODIzNSwgMC41ODgyMzUsIDAuNTg4MjM1XSxcbiAgICAgICAgXCJjb2xvckRpZmZ1c2VcIiA6IFswLjU4ODIzNSwgMC41ODgyMzUsIDAuNTg4MjM1XSxcbiAgICAgICAgXCJjb2xvclNwZWN1bGFyXCIgOiBbMC4wLCAwLjAsIDAuMF0sXG4gICAgICAgIFwiaWxsdW1pbmF0aW9uXCIgOiAyLFxuICAgICAgICBcIm9wdGljYWxEZW5zaXR5XCIgOiAxLjUsXG4gICAgICAgIFwic3BlY3VsYXJDb2VmXCIgOiA5Ljk5OTk5OSxcbiAgICAgICAgXCJ0cmFuc3BhcmVuY3lcIiA6IDAuMFxuICAgIH1dLFxuICAgIFwidmVydGljZXNcIjogVHJhY2tWZXJ0aWNlcyxcbiAgICBcIm1vcnBoVGFyZ2V0c1wiOiBbXSxcbiAgICBcIm1vcnBoQ29sb3JzXCI6IFtdLFxuICAgIFwibm9ybWFsc1wiOiBUcmFja05vcm1hbHMsXG4gICAgXCJjb2xvcnNcIjogW10sXG4gICAgXCJ1dnNcIjogW1RyYWNrVXZzXSxcbiAgICBcImZhY2VzXCI6IFRyYWNrRmFjZXNcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9
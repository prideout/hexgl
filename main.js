!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";t.__esModule=!0,n(1);var i=n(2),r="syferfontein_18d_clear_2k",s=r+"_ibl"+Filament.getSupportedFormatSuffix("etc s3tc")+".ktx.bmp",o=r+"_skybox_tiny.ktx.bmp",a=r+"_skybox.ktx.bmp",c=function(){function e(e){var t=this;this.canvas=e,this.engine=Filament.Engine.create(e),this.scene=this.engine.createScene(),this.skybox=this.engine.createSkyFromKtx(o),this.scene.setSkybox(this.skybox),this.indirectLight=this.engine.createIblFromKtx(s),this.indirectLight.setIntensity(1e5),this.scene.setIndirectLight(this.indirectLight),this.swapChain=this.engine.createSwapChain(),this.renderer=this.engine.createRenderer(),this.camera=this.engine.createCamera(),this.view=this.engine.createView(),this.view.setCamera(this.camera),this.view.setScene(this.scene),Filament.fetch([a],function(){t.engine.destroySkybox(t.skybox),t.skybox=t.engine.createSkyFromKtx(a),t.scene.setSkybox(t.skybox)});this.camera.lookAt([0,0,4],[0,0,0],[0,1,0]),this.render=this.render.bind(this),this.resize=this.resize.bind(this),window.addEventListener("resize",this.resize),this.resize(),window.requestAnimationFrame(this.render)}return e.prototype.render=function(){this.renderer.render(this.swapChain,this.view),window.requestAnimationFrame(this.render)},e.prototype.resize=function(){var e=window.devicePixelRatio,t=this.canvas.width=window.innerWidth*e,n=this.canvas.height=window.innerHeight*e;this.view.setViewport([0,0,t,n]);var i=t/n,r=Filament.Camera$Fov,s=i<1?r.HORIZONTAL:r.VERTICAL;this.camera.setProjectionFov(45,i,1,10,s)},e}();Filament.init([o,s],function(){window.app=new c(document.getElementsByTagName("canvas")[0])}),i.createWorker(function(e,t){t(e.x+e.y)},function(e){console.log("We received this response from the worker: "+e)}).postMessage({x:5,y:5})},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=n(3);t.createWorker=i.createWorker},function(e,t,n){"use strict";t.__esModule=!0,t.createWorker=function(e,t){return void 0===t&&(t=function(e){}),new i(e,t)};var i=function(){function e(e,t){void 0===t&&(t=function(e){});var n=this;this.workerFunction=e,this.onMessage=t;var i=new Blob(["self.onmessage=function(e){"+("("+e+").call(this, e.data, postMessage)")+"}"],{type:"application/javascript"});this._nativeWorker=new Worker(URL.createObjectURL(i)),this._nativeWorker.onmessage=function(e){n.onMessage(e.data)}}return e.prototype.postMessage=function(e,t){this._nativeWorker.postMessage(e,t)},e.prototype.terminate=function(){this._nativeWorker.terminate()},e}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90eXBlZC13ZWItd29ya2Vycy9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3R5cGVkLXdlYi13b3JrZXJzL2xpYi9UeXBlZFdvcmtlci5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInR5cGVkX3dlYl93b3JrZXJzXzEiLCJlbnZpcm9uIiwiaWJsX3VybCIsIkZpbGFtZW50IiwiZ2V0U3VwcG9ydGVkRm9ybWF0U3VmZml4Iiwic2t5X3NtYWxsX3VybCIsInNreV9sYXJnZV91cmwiLCJBcHAiLCJjYW52YXMiLCJfdGhpcyIsInRoaXMiLCJlbmdpbmUiLCJFbmdpbmUiLCJzY2VuZSIsImNyZWF0ZVNjZW5lIiwic2t5Ym94IiwiY3JlYXRlU2t5RnJvbUt0eCIsInNldFNreWJveCIsImluZGlyZWN0TGlnaHQiLCJjcmVhdGVJYmxGcm9tS3R4Iiwic2V0SW50ZW5zaXR5Iiwic2V0SW5kaXJlY3RMaWdodCIsInN3YXBDaGFpbiIsImNyZWF0ZVN3YXBDaGFpbiIsInJlbmRlcmVyIiwiY3JlYXRlUmVuZGVyZXIiLCJjYW1lcmEiLCJjcmVhdGVDYW1lcmEiLCJ2aWV3IiwiY3JlYXRlVmlldyIsInNldENhbWVyYSIsInNldFNjZW5lIiwiZmV0Y2giLCJkZXN0cm95U2t5Ym94IiwibG9va0F0IiwicmVuZGVyIiwicmVzaXplIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRwciIsImRldmljZVBpeGVsUmF0aW8iLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsInNldFZpZXdwb3J0IiwiYXNwZWN0IiwiRm92IiwiQ2FtZXJhJEZvdiIsImZvdiIsIkhPUklaT05UQUwiLCJWRVJUSUNBTCIsInNldFByb2plY3Rpb25Gb3YiLCJpbml0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImNyZWF0ZVdvcmtlciIsImlucHV0IiwiY2FsbGJhY2siLCJ4IiwieSIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJwb3N0TWVzc2FnZSIsIlR5cGVkV29ya2VyXzEiLCJ3b3JrZXJGdW5jdGlvbiIsIm9uTWVzc2FnZSIsIm91dHB1dCIsIlR5cGVkV29ya2VyIiwiYmxvYiIsIkJsb2IiLCJ0eXBlIiwiX25hdGl2ZVdvcmtlciIsIldvcmtlciIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VFdmVudCIsImRhdGEiLCJ3b3JrZXJNZXNzYWdlIiwidHJhbnNmZXIiLCJ0ZXJtaW5hdGUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYs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LElBQUFBLElBQW1DQSxFQUFBLFNBQUFDLE1BQ25DLElBQUE1RCxFQUFBQyxLQUNBQSxLQUFBeUQsaUJBQ0F6RCxLQUFBMEQsWUFDQSxJQUVBRyxFQUFBLElBQUFDLE1BREEsK0JBREEsSUFBQUwsRUFBQSxxQ0FDcUQsTUFDVk0sS0FBQSwyQkFDM0MvRCxLQUFBZ0UsY0FBQSxJQUFBQyxPQUFBQyxJQUFBQyxnQkFBQU4sSUFDQTdELEtBQUFnRSxjQUFBSSxVQUFBLFNBQUFDLEdBQ0F0RSxFQUFBMkQsVUFBQVcsRUFBQUMsT0FhQSxPQU5BVixFQUFBMUUsVUFBQXFFLFlBQUEsU0FBQWdCLEVBQUFDLEdBQ0F4RSxLQUFBZ0UsY0FBQVQsWUFBQWdCLEVBQUFDLElBRUFaLEVBQUExRSxVQUFBdUYsVUFBQSxXQUNBekUsS0FBQWdFLGNBQUFTLGFBRUFiLEVBeEJBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgJy4vZmlsYW1lbnQnO1xuXG5pbXBvcnQgeyBjcmVhdGVXb3JrZXIsIElUeXBlZFdvcmtlciB9IGZyb20gJ3R5cGVkLXdlYi13b3JrZXJzJ1xuXG5jb25zdCBpYmxfc3VmZml4ID0gRmlsYW1lbnQuZ2V0U3VwcG9ydGVkRm9ybWF0U3VmZml4KCdldGMgczN0YycpO1xuY29uc3QgZW52aXJvbiA9ICdzeWZlcmZvbnRlaW5fMThkX2NsZWFyXzJrJ1xuY29uc3QgaWJsX3VybCA9IGAke2Vudmlyb259X2libCR7aWJsX3N1ZmZpeH0ua3R4LmJtcGA7XG5jb25zdCBza3lfc21hbGxfdXJsID0gYCR7ZW52aXJvbn1fc2t5Ym94X3Rpbnkua3R4LmJtcGA7XG5jb25zdCBza3lfbGFyZ2VfdXJsID0gYCR7ZW52aXJvbn1fc2t5Ym94Lmt0eC5ibXBgO1xuXG5jbGFzcyBBcHAge1xuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgZW5naW5lOiBGaWxhbWVudC5FbmdpbmU7XG4gICAgc2NlbmU6IEZpbGFtZW50LlNjZW5lO1xuICAgIHNreWJveDogRmlsYW1lbnQuU2t5Ym94O1xuICAgIGluZGlyZWN0TGlnaHQ6IEZpbGFtZW50LkluZGlyZWN0TGlnaHQ7XG4gICAgc3dhcENoYWluOiBGaWxhbWVudC5Td2FwQ2hhaW47XG4gICAgcmVuZGVyZXI6IEZpbGFtZW50LlJlbmRlcmVyO1xuICAgIGNhbWVyYTogRmlsYW1lbnQuQ2FtZXJhO1xuICAgIHZpZXc6IEZpbGFtZW50LlZpZXc7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW52YXMpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIHRoaXMuZW5naW5lID0gRmlsYW1lbnQuRW5naW5lLmNyZWF0ZShjYW52YXMpO1xuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcy5lbmdpbmUuY3JlYXRlU2NlbmUoKTtcbiAgICAgICAgdGhpcy5za3lib3ggPSB0aGlzLmVuZ2luZS5jcmVhdGVTa3lGcm9tS3R4KHNreV9zbWFsbF91cmwpO1xuICAgICAgICB0aGlzLnNjZW5lLnNldFNreWJveCh0aGlzLnNreWJveCk7XG4gICAgICAgIHRoaXMuaW5kaXJlY3RMaWdodCA9IHRoaXMuZW5naW5lLmNyZWF0ZUlibEZyb21LdHgoaWJsX3VybCk7XG4gICAgICAgIHRoaXMuaW5kaXJlY3RMaWdodC5zZXRJbnRlbnNpdHkoMTAwMDAwKTtcbiAgICAgICAgdGhpcy5zY2VuZS5zZXRJbmRpcmVjdExpZ2h0KHRoaXMuaW5kaXJlY3RMaWdodCk7XG4gICAgICAgIHRoaXMuc3dhcENoYWluID0gdGhpcy5lbmdpbmUuY3JlYXRlU3dhcENoYWluKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSB0aGlzLmVuZ2luZS5jcmVhdGVSZW5kZXJlcigpO1xuICAgICAgICB0aGlzLmNhbWVyYSA9IHRoaXMuZW5naW5lLmNyZWF0ZUNhbWVyYSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmVuZ2luZS5jcmVhdGVWaWV3KCk7XG4gICAgICAgIHRoaXMudmlldy5zZXRDYW1lcmEodGhpcy5jYW1lcmEpO1xuICAgICAgICB0aGlzLnZpZXcuc2V0U2NlbmUodGhpcy5zY2VuZSk7XG5cbiAgICAgICAgRmlsYW1lbnQuZmV0Y2goW3NreV9sYXJnZV91cmxdLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5kZXN0cm95U2t5Ym94KHRoaXMuc2t5Ym94KTtcbiAgICAgICAgICAgIHRoaXMuc2t5Ym94ID0gdGhpcy5lbmdpbmUuY3JlYXRlU2t5RnJvbUt0eChza3lfbGFyZ2VfdXJsKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc2V0U2t5Ym94KHRoaXMuc2t5Ym94KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZXllID0gWzAsIDAsIDRdLCBjZW50ZXIgPSBbMCwgMCwgMF0sIHVwID0gWzAsIDEsIDBdO1xuICAgICAgICB0aGlzLmNhbWVyYS5sb29rQXQoZXllLCBjZW50ZXIsIHVwKTtcblxuICAgICAgICB0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVzaXplID0gdGhpcy5yZXNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplKTtcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcik7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnN3YXBDaGFpbiwgdGhpcy52aWV3KTtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcik7XG4gICAgfVxuXG4gICAgcmVzaXplKCkge1xuICAgICAgICBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogZHByO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiBkcHI7XG4gICAgICAgIHRoaXMudmlldy5zZXRWaWV3cG9ydChbMCwgMCwgd2lkdGgsIGhlaWdodF0pO1xuXG4gICAgICAgIGNvbnN0IGFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgICAgICBjb25zdCBGb3YgPSBGaWxhbWVudC5DYW1lcmEkRm92LCBmb3YgPSBhc3BlY3QgPCAxID8gRm92LkhPUklaT05UQUwgOiBGb3YuVkVSVElDQUw7XG4gICAgICAgIHRoaXMuY2FtZXJhLnNldFByb2plY3Rpb25Gb3YoNDUsIGFzcGVjdCwgMS4wLCAxMC4wLCBmb3YpO1xuICAgIH1cbn1cblxuRmlsYW1lbnQuaW5pdChbc2t5X3NtYWxsX3VybCwgaWJsX3VybF0sICgpID0+IHtcbiAgICB3aW5kb3dbJ2FwcCddID0gbmV3IEFwcChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY2FudmFzJylbMF0pO1xufSk7XG5cbmludGVyZmFjZSBWYWx1ZXMge1xuICAgIHg6IG51bWJlclxuICAgIHk6IG51bWJlclxufVxuXG5mdW5jdGlvbiB3b3JrRm4oaW5wdXQ6IFZhbHVlcywgY2FsbGJhY2s6IChfOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjYWxsYmFjayhpbnB1dC54ICsgaW5wdXQueSlcbn1cblxuZnVuY3Rpb24gbG9nRm4ocmVzdWx0OiBudW1iZXIpIHtcbiAgICBjb25zb2xlLmxvZyhgV2UgcmVjZWl2ZWQgdGhpcyByZXNwb25zZSBmcm9tIHRoZSB3b3JrZXI6ICR7cmVzdWx0fWApXG59XG5cbmNvbnN0IHR5cGVkV29ya2VyOiBJVHlwZWRXb3JrZXI8VmFsdWVzLCBudW1iZXI+ID0gY3JlYXRlV29ya2VyKHdvcmtGbiwgbG9nRm4pXG5cbnR5cGVkV29ya2VyLnBvc3RNZXNzYWdlKHsgeDogNSwgeTogNSB9KVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XHJcbnZhciBUeXBlZFdvcmtlcl8xID0gcmVxdWlyZShcIi4vVHlwZWRXb3JrZXJcIik7XHJcbmV4cG9ydHMuY3JlYXRlV29ya2VyID0gVHlwZWRXb3JrZXJfMS5jcmVhdGVXb3JrZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xyXG5mdW5jdGlvbiBjcmVhdGVXb3JrZXIod29ya2VyRnVuY3Rpb24sIG9uTWVzc2FnZSkge1xyXG4gICAgaWYgKG9uTWVzc2FnZSA9PT0gdm9pZCAwKSB7IG9uTWVzc2FnZSA9IGZ1bmN0aW9uIChvdXRwdXQpIHsgfTsgfVxyXG4gICAgcmV0dXJuIG5ldyBUeXBlZFdvcmtlcih3b3JrZXJGdW5jdGlvbiwgb25NZXNzYWdlKTtcclxufVxyXG5leHBvcnRzLmNyZWF0ZVdvcmtlciA9IGNyZWF0ZVdvcmtlcjtcclxudmFyIFR5cGVkV29ya2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHlwZWRXb3JrZXIod29ya2VyRnVuY3Rpb24sIG9uTWVzc2FnZSkge1xyXG4gICAgICAgIGlmIChvbk1lc3NhZ2UgPT09IHZvaWQgMCkgeyBvbk1lc3NhZ2UgPSBmdW5jdGlvbiAob3V0cHV0KSB7IH07IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMud29ya2VyRnVuY3Rpb24gPSB3b3JrZXJGdW5jdGlvbjtcclxuICAgICAgICB0aGlzLm9uTWVzc2FnZSA9IG9uTWVzc2FnZTtcclxuICAgICAgICB2YXIgcG9zdE1lc3NhZ2UgPSBcIihcIiArIHdvcmtlckZ1bmN0aW9uICsgXCIpLmNhbGwodGhpcywgZS5kYXRhLCBwb3N0TWVzc2FnZSlcIjtcclxuICAgICAgICB2YXIgd29ya2VyRmlsZSA9IFwic2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7XCIgKyBwb3N0TWVzc2FnZSArIFwifVwiO1xyXG4gICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3dvcmtlckZpbGVdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JyB9KTtcclxuICAgICAgICB0aGlzLl9uYXRpdmVXb3JrZXIgPSBuZXcgV29ya2VyKFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikpO1xyXG4gICAgICAgIHRoaXMuX25hdGl2ZVdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZUV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9uTWVzc2FnZShtZXNzYWdlRXZlbnQuZGF0YSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUG9zdCBtZXNzYWdlIHRvIHdvcmtlciBmb3IgcHJvY2Vzc2luZ1xyXG4gICAgICogQHBhcmFtIHdvcmtlck1lc3NhZ2UgbWVzc2FnZSB0byBzZW5kIHRvIHdvcmtlclxyXG4gICAgICovXHJcbiAgICBUeXBlZFdvcmtlci5wcm90b3R5cGUucG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAod29ya2VyTWVzc2FnZSwgdHJhbnNmZXIpIHtcclxuICAgICAgICB0aGlzLl9uYXRpdmVXb3JrZXIucG9zdE1lc3NhZ2Uod29ya2VyTWVzc2FnZSwgdHJhbnNmZXIpO1xyXG4gICAgfTtcclxuICAgIFR5cGVkV29ya2VyLnByb3RvdHlwZS50ZXJtaW5hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbmF0aXZlV29ya2VyLnRlcm1pbmF0ZSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUeXBlZFdvcmtlcjtcclxufSgpKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==